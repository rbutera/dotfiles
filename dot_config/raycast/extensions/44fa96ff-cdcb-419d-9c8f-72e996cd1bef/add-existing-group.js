var O=Object.create;var h=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var f=t=>h(t,"__esModule",{value:!0});var N=(t,e)=>{for(var a in e)h(t,a,{get:e[a],enumerable:!0})},A=(t,e,a,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of L(e))!v.call(t,r)&&(a||r!=="default")&&h(t,r,{get:()=>e[r],enumerable:!(i=I(e,r))||i.enumerable});return t},E=(t,e)=>A(f(h(t!=null?O(T(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),M=(t=>(e,a)=>t&&t.get(e)||(a=A(f({}),e,1),t&&t.set(e,a),a))(typeof WeakMap!="undefined"?new WeakMap:0);var U={};N(U,{default:()=>G});var o=require("@raycast/api");function g(t){return t.groupCode!==void 0}var u=require("react");var C=require("@raycast/api"),x="whatsapp-chats";async function S(){return JSON.parse(await C.LocalStorage.getItem(x)||"[]")}async function y(t){await C.LocalStorage.setItem(x,JSON.stringify(t))}function P(){let[t,e]=(0,u.useState)();return(0,u.useEffect)(()=>{S().then(a=>{e(a)})},[]),{chats:t||[],isLoading:t===void 0,updateChats:async a=>{e(a),await y(a)}}}var m=E(require("crypto"),1);var W="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var R=128,p,s,k=t=>{!p||p.length<t?(p=Buffer.allocUnsafe(t*R),m.default.randomFillSync(p),s=0):s+t>p.length&&(m.default.randomFillSync(p),s=0),s+=t};var w=(t=21)=>{k(t-=0);let e="";for(let a=s-t;a<s;a++)e+=W[p[a]&63];return e};function G({defaultValue:t}){let{chats:e,updateChats:a}=P(),i=!t;async function r(d){let n={id:i?w():t.id,name:d.name,pinned:!!d.pinned,groupCode:d.groupCode},F=i||n.groupCode!==t.groupCode,b=e.filter(g).some(l=>l.groupCode===n.groupCode);if(F&&b){await(0,o.showToast)(o.Toast.Style.Failure,"Chat already exists");return}if(i)await a([...e,n]),await(0,o.showToast)(o.Toast.Style.Success,"Created new group",n.name);else{let l=e.map(c=>c.id===n.id?n:c);await a(l),await(0,o.showToast)(o.Toast.Style.Success,"Updated existing group",n.name)}await(0,o.popToRoot)({clearSearchBar:!0})}return _jsx(o.Form,{actions:_jsx(o.ActionPanel,null,_jsx(o.Action.SubmitForm,{title:"Save Group",onSubmit:r}))},_jsx(o.Form.TextField,{id:"name",title:"Name",placeholder:"Raycasters",defaultValue:t?.name}),_jsx(o.Form.TextField,{id:"groupCode",title:"Group Code",placeholder:"LkXPP0Lij10I3OYynP3MXb",defaultValue:t?.groupCode}),_jsx(o.Form.Checkbox,{id:"pinned",label:"Pinned Chat",defaultValue:t?.pinned}))}module.exports=M(U);0&&(module.exports={});
