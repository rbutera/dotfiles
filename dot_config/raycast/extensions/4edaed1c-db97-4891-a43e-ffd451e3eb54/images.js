var Du=Object.create;var Ft=Object.defineProperty,Wu=Object.defineProperties,Lu=Object.getOwnPropertyDescriptor,$u=Object.getOwnPropertyDescriptors,zu=Object.getOwnPropertyNames,Pi=Object.getOwnPropertySymbols,Mu=Object.getPrototypeOf,vi=Object.prototype.hasOwnProperty,ju=Object.prototype.propertyIsEnumerable;var Ai=(r,t,o)=>t in r?Ft(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,M=(r,t)=>{for(var o in t||(t={}))vi.call(t,o)&&Ai(r,o,t[o]);if(Pi)for(var o of Pi(t))ju.call(t,o)&&Ai(r,o,t[o]);return r},J=(r,t)=>Wu(r,$u(t)),ki=r=>Ft(r,"__esModule",{value:!0});var Dt=(r,t)=>()=>(r&&(t=r(r=0)),t);var A=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Ii=(r,t)=>{for(var o in t)Ft(r,o,{get:t[o],enumerable:!0})},xi=(r,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of zu(t))!vi.call(r,s)&&(o||s!=="default")&&Ft(r,s,{get:()=>t[s],enumerable:!(a=Lu(t,s))||a.enumerable});return r},fe=(r,t)=>xi(ki(Ft(r!=null?Du(Mu(r)):{},"default",!t&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),Uu=(r=>(t,o)=>r&&r.get(t)||(o=xi(ki({}),t,1),r&&r.set(t,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var Mi=A((kr,zi)=>{(function(r,t){typeof kr=="object"&&typeof zi<"u"?t(kr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(kr,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function a(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=a();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,p=Promise,m=Promise.prototype.then,b=Promise.resolve.bind(p),_=Promise.reject.bind(p);function T(e){return new p(e)}function S(e){return b(e)}function g(e){return _(e)}function y(e,n,i){return m.call(e,n,i)}function C(e,n,i){y(y(e,n,i),void 0,f)}function P(e,n){C(e,n)}function v(e,n){C(e,void 0,n)}function F(e,n,i){return y(e,n,i)}function H(e){y(e,void 0,f)}let I=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=S(void 0);return i=>y(n,i)})();function z(e,n,i){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,i)}function B(e,n,i){try{return S(z(e,n,i))}catch(l){return g(l)}}let ae=16384;class K{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let i=this._back,l=i;i._elements.length===ae-1&&(l={_elements:[],_next:void 0}),i._elements.push(n),l!==i&&(this._back=l,i._next=l),++this._size}shift(){let n=this._front,i=n,l=this._cursor,c=l+1,d=n._elements,h=d[l];return c===ae&&(i=n._next,c=0),--this._size,this._cursor=c,n!==i&&(this._front=i),d[l]=void 0,h}forEach(n){let i=this._cursor,l=this._front,c=l._elements;for(;(i!==c.length||l._next!==void 0)&&!(i===c.length&&(l=l._next,c=l._elements,i=0,c.length===0));)n(c[i]),++i}peek(){let n=this._front,i=this._cursor;return n._elements[i]}}function co(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?tn(e):n._state==="closed"?fl(e):fo(e,n._storedError)}function en(e,n){let i=e._ownerReadableStream;return ue(i,n)}function ye(e){e._ownerReadableStream._state==="readable"?rn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):dl(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Ye(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function tn(e){e._closedPromise=T((n,i)=>{e._closedPromise_resolve=n,e._closedPromise_reject=i})}function fo(e,n){tn(e),rn(e,n)}function fl(e){tn(e),mo(e)}function rn(e,n){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function dl(e,n){fo(e,n)}function mo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let ho=t("[[AbortSteps]]"),po=t("[[ErrorSteps]]"),nn=t("[[CancelSteps]]"),on=t("[[PullSteps]]"),bo=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},ml=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function hl(e){return typeof e=="object"||typeof e=="function"}function ge(e,n){if(e!==void 0&&!hl(e))throw new TypeError(`${n} is not an object.`)}function se(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function pl(e){return typeof e=="object"&&e!==null||typeof e=="function"}function yo(e,n){if(!pl(e))throw new TypeError(`${n} is not an object.`)}function Se(e,n,i){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${i}'.`)}function an(e,n,i){if(e===void 0)throw new TypeError(`${n} is required in '${i}'.`)}function sn(e){return Number(e)}function go(e){return e===0?0:e}function bl(e){return go(ml(e))}function So(e,n){let l=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=go(c),!bo(c))throw new TypeError(`${n} is not a finite number`);if(c=bl(c),c<0||c>l)throw new TypeError(`${n} is outside the accepted range of ${0} to ${l}, inclusive`);return!bo(c)||c===0?0:c}function ln(e,n){if(!ke(e))throw new TypeError(`${n} is not a ReadableStream.`)}function Qe(e){return new _t(e)}function _o(e,n){e._reader._readRequests.push(n)}function un(e,n,i){let c=e._reader._readRequests.shift();i?c._closeSteps():c._chunkSteps(n)}function Kt(e){return e._reader._readRequests.length}function wo(e){let n=e._reader;return!(n===void 0||!Ce(n))}class _t{constructor(n){if(Se(n,1,"ReadableStreamDefaultReader"),ln(n,"First parameter"),Ie(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");co(this,n),this._readRequests=new K}get closed(){return Ce(this)?this._closedPromise:g(Zt("closed"))}cancel(n=void 0){return Ce(this)?this._ownerReadableStream===void 0?g(Ye("cancel")):en(this,n):g(Zt("cancel"))}read(){if(!Ce(this))return g(Zt("read"));if(this._ownerReadableStream===void 0)return g(Ye("read from"));let n,i,l=T((d,h)=>{n=d,i=h});return wt(this,{_chunkSteps:d=>n({value:d,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:d=>i(d)}),l}releaseLock(){if(!Ce(this))throw Zt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ye(this)}}}Object.defineProperties(_t.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(_t.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ce(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof _t}function wt(e,n){let i=e._ownerReadableStream;i._disturbed=!0,i._state==="closed"?n._closeSteps():i._state==="errored"?n._errorSteps(i._storedError):i._readableStreamController[on](n)}function Zt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Ro=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class To{constructor(n,i){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=i}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?F(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let i=()=>this._returnSteps(n);return this._ongoingPromise?F(this._ongoingPromise,i,i):i()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return g(Ye("iterate"));let i,l,c=T((h,w)=>{i=h,l=w});return wt(n,{_chunkSteps:h=>{this._ongoingPromise=void 0,I(()=>i({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ye(n),i({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,ye(n),l(h)}}),c}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let i=this._reader;if(i._ownerReadableStream===void 0)return g(Ye("finish iterating"));if(!this._preventCancel){let l=en(i,n);return ye(i),F(l,()=>({value:n,done:!0}))}return ye(i),S({value:n,done:!0})}}let Eo={next(){return Co(this)?this._asyncIteratorImpl.next():g(Po("next"))},return(e){return Co(this)?this._asyncIteratorImpl.return(e):g(Po("return"))}};Ro!==void 0&&Object.setPrototypeOf(Eo,Ro);function yl(e,n){let i=Qe(e),l=new To(i,n),c=Object.create(Eo);return c._asyncIteratorImpl=l,c}function Co(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof To}catch{return!1}}function Po(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Ao=Number.isNaN||function(e){return e!==e};function Rt(e){return e.slice()}function vo(e,n,i,l,c){new Uint8Array(e).set(new Uint8Array(i,l,c),n)}function hd(e){return e}function Jt(e){return!1}function ko(e,n,i){if(e.slice)return e.slice(n,i);let l=i-n,c=new ArrayBuffer(l);return vo(c,0,e,n,l),c}function gl(e){return!(typeof e!="number"||Ao(e)||e<0)}function Io(e){let n=ko(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function cn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function fn(e,n,i){if(!gl(i)||i===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:i}),e._queueTotalSize+=i}function Sl(e){return e._queue.peek().value}function Pe(e){e._queue=new K,e._queueTotalSize=0}class Tt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!dn(this))throw bn("view");return this._view}respond(n){if(!dn(this))throw bn("respond");if(Se(n,1,"respond"),n=So(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Jt(this._view.buffer),or(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!dn(this))throw bn("respondWithNewView");if(Se(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Jt(n.buffer),ir(this._associatedReadableByteStreamController,n)}}Object.defineProperties(Tt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Tt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Xe{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!De(this))throw Ct("byobRequest");return pn(this)}get desiredSize(){if(!De(this))throw Ct("desiredSize");return Lo(this)}close(){if(!De(this))throw Ct("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);Et(this)}enqueue(n){if(!De(this))throw Ct("enqueue");if(Se(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be enqueued to`);nr(this,n)}error(n=void 0){if(!De(this))throw Ct("error");le(this,n)}[nn](n){xo(this),Pe(this);let i=this._cancelAlgorithm(n);return rr(this),i}[on](n){let i=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Fo(this);let d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);n._chunkSteps(d);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let c;try{c=new ArrayBuffer(l)}catch(h){n._errorSteps(h);return}let d={buffer:c,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}_o(i,n),We(this)}}Object.defineProperties(Xe.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Xe.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function De(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Xe}function dn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Tt}function We(e){if(!Tl(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,We(e))},l=>{le(e,l)})}function xo(e){hn(e),e._pendingPullIntos=new K}function mn(e,n){let i=!1;e._state==="closed"&&(i=!0);let l=Bo(n);n.readerType==="default"?un(e,l,i):Pl(e,l,i)}function Bo(e){let n=e.bytesFilled,i=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/i)}function er(e,n,i,l){e._queue.push({buffer:n,byteOffset:i,byteLength:l}),e._queueTotalSize+=l}function Oo(e,n){let i=n.elementSize,l=n.bytesFilled-n.bytesFilled%i,c=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),d=n.bytesFilled+c,h=d-d%i,w=c,E=!1;h>l&&(w=h-n.bytesFilled,E=!0);let x=e._queue;for(;w>0;){let O=x.peek(),q=Math.min(w,O.byteLength),j=n.byteOffset+n.bytesFilled;vo(n.buffer,j,O.buffer,O.byteOffset,q),O.byteLength===q?x.shift():(O.byteOffset+=q,O.byteLength-=q),e._queueTotalSize-=q,qo(e,q,n),w-=q}return E}function qo(e,n,i){i.bytesFilled+=n}function Fo(e){e._queueTotalSize===0&&e._closeRequested?(rr(e),Ot(e._controlledReadableByteStream)):We(e)}function hn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Do(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();Oo(e,n)&&(tr(e),mn(e._controlledReadableByteStream,n))}}function _l(e,n,i){let l=e._controlledReadableByteStream,c=1;n.constructor!==DataView&&(c=n.constructor.BYTES_PER_ELEMENT);let d=n.constructor,h=n.buffer,w={buffer:h,bufferByteLength:h.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:c,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(w),Mo(l,i);return}if(l._state==="closed"){let E=new d(w.buffer,w.byteOffset,0);i._closeSteps(E);return}if(e._queueTotalSize>0){if(Oo(e,w)){let E=Bo(w);Fo(e),i._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");le(e,E),i._errorSteps(E);return}}e._pendingPullIntos.push(w),Mo(l,i),We(e)}function wl(e,n){let i=e._controlledReadableByteStream;if(yn(i))for(;jo(i)>0;){let l=tr(e);mn(i,l)}}function Rl(e,n,i){if(qo(e,n,i),i.bytesFilled<i.elementSize)return;tr(e);let l=i.bytesFilled%i.elementSize;if(l>0){let c=i.byteOffset+i.bytesFilled,d=ko(i.buffer,c-l,c);er(e,d,0,d.byteLength)}i.bytesFilled-=l,mn(e._controlledReadableByteStream,i),Do(e)}function Wo(e,n){let i=e._pendingPullIntos.peek();hn(e),e._controlledReadableByteStream._state==="closed"?wl(e):Rl(e,n,i),We(e)}function tr(e){return e._pendingPullIntos.shift()}function Tl(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(wo(n)&&Kt(n)>0||yn(n)&&jo(n)>0||Lo(e)>0)}function rr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Et(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw le(e,l),l}rr(e),Ot(n)}}function nr(e,n){let i=e._controlledReadableByteStream;if(e._closeRequested||i._state!=="readable")return;let l=n.buffer,c=n.byteOffset,d=n.byteLength,h=l;if(e._pendingPullIntos.length>0){let w=e._pendingPullIntos.peek();Jt(w.buffer),w.buffer=w.buffer}if(hn(e),wo(i))if(Kt(i)===0)er(e,h,c,d);else{e._pendingPullIntos.length>0&&tr(e);let w=new Uint8Array(h,c,d);un(i,w,!1)}else yn(i)?(er(e,h,c,d),Do(e)):er(e,h,c,d);We(e)}function le(e,n){let i=e._controlledReadableByteStream;i._state==="readable"&&(xo(e),Pe(e),rr(e),di(i,n))}function pn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),i=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(Tt.prototype);Cl(l,e,i),e._byobRequest=l}return e._byobRequest}function Lo(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function or(e,n){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(i.bytesFilled+n>i.byteLength)throw new RangeError("bytesWritten out of range")}i.buffer=i.buffer,Wo(e,n)}function ir(e,n){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(i.byteOffset+i.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(i.bytesFilled+n.byteLength>i.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=n.byteLength;i.buffer=n.buffer,Wo(e,c)}function $o(e,n,i,l,c,d,h){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,Pe(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=d,n._pullAlgorithm=l,n._cancelAlgorithm=c,n._autoAllocateChunkSize=h,n._pendingPullIntos=new K,e._readableStreamController=n;let w=i();C(S(w),()=>{n._started=!0,We(n)},E=>{le(n,E)})}function El(e,n,i){let l=Object.create(Xe.prototype),c=()=>{},d=()=>S(void 0),h=()=>S(void 0);n.start!==void 0&&(c=()=>n.start(l)),n.pull!==void 0&&(d=()=>n.pull(l)),n.cancel!==void 0&&(h=E=>n.cancel(E));let w=n.autoAllocateChunkSize;if(w===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");$o(e,l,c,d,h,i,w)}function Cl(e,n,i){e._associatedReadableByteStreamController=n,e._view=i}function bn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ct(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function zo(e){return new Pt(e)}function Mo(e,n){e._reader._readIntoRequests.push(n)}function Pl(e,n,i){let c=e._reader._readIntoRequests.shift();i?c._closeSteps(n):c._chunkSteps(n)}function jo(e){return e._reader._readIntoRequests.length}function yn(e){let n=e._reader;return!(n===void 0||!Le(n))}class Pt{constructor(n){if(Se(n,1,"ReadableStreamBYOBReader"),ln(n,"First parameter"),Ie(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!De(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");co(this,n),this._readIntoRequests=new K}get closed(){return Le(this)?this._closedPromise:g(ar("closed"))}cancel(n=void 0){return Le(this)?this._ownerReadableStream===void 0?g(Ye("cancel")):en(this,n):g(ar("cancel"))}read(n){if(!Le(this))return g(ar("read"));if(!ArrayBuffer.isView(n))return g(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(Jt(n.buffer),this._ownerReadableStream===void 0)return g(Ye("read from"));let i,l,c=T((h,w)=>{i=h,l=w});return Uo(this,n,{_chunkSteps:h=>i({value:h,done:!1}),_closeSteps:h=>i({value:h,done:!0}),_errorSteps:h=>l(h)}),c}releaseLock(){if(!Le(this))throw ar("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ye(this)}}}Object.defineProperties(Pt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Le(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Pt}function Uo(e,n,i){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?i._errorSteps(l._storedError):_l(l._readableStreamController,n,i)}function ar(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function At(e,n){let{highWaterMark:i}=e;if(i===void 0)return n;if(Ao(i)||i<0)throw new RangeError("Invalid highWaterMark");return i}function sr(e){let{size:n}=e;return n||(()=>1)}function lr(e,n){ge(e,n);let i=e==null?void 0:e.highWaterMark,l=e==null?void 0:e.size;return{highWaterMark:i===void 0?void 0:sn(i),size:l===void 0?void 0:Al(l,`${n} has member 'size' that`)}}function Al(e,n){return se(e,n),i=>sn(e(i))}function vl(e,n){ge(e,n);let i=e==null?void 0:e.abort,l=e==null?void 0:e.close,c=e==null?void 0:e.start,d=e==null?void 0:e.type,h=e==null?void 0:e.write;return{abort:i===void 0?void 0:kl(i,e,`${n} has member 'abort' that`),close:l===void 0?void 0:Il(l,e,`${n} has member 'close' that`),start:c===void 0?void 0:xl(c,e,`${n} has member 'start' that`),write:h===void 0?void 0:Bl(h,e,`${n} has member 'write' that`),type:d}}function kl(e,n,i){return se(e,i),l=>B(e,n,[l])}function Il(e,n,i){return se(e,i),()=>B(e,n,[])}function xl(e,n,i){return se(e,i),l=>z(e,n,[l])}function Bl(e,n,i){return se(e,i),(l,c)=>B(e,n,[l,c])}function No(e,n){if(!Ke(e))throw new TypeError(`${n} is not a WritableStream.`)}function Ol(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let ql=typeof AbortController=="function";function Fl(){if(ql)return new AbortController}class vt{constructor(n={},i={}){n===void 0?n=null:yo(n,"First parameter");let l=lr(i,"Second parameter"),c=vl(n,"First parameter");if(Go(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let h=sr(l),w=At(l,1);Ql(this,c,w,h)}get locked(){if(!Ke(this))throw mr("locked");return Ze(this)}abort(n=void 0){return Ke(this)?Ze(this)?g(new TypeError("Cannot abort a stream that already has a writer")):ur(this,n):g(mr("abort"))}close(){return Ke(this)?Ze(this)?g(new TypeError("Cannot close a stream that already has a writer")):me(this)?g(new TypeError("Cannot close an already-closing stream")):Vo(this):g(mr("close"))}getWriter(){if(!Ke(this))throw mr("getWriter");return Ho(this)}}Object.defineProperties(vt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function Ho(e){return new kt(e)}function Dl(e,n,i,l,c=1,d=()=>1){let h=Object.create(vt.prototype);Go(h);let w=Object.create(Je.prototype);return Jo(h,w,e,n,i,l,c,d),h}function Go(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new K,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Ke(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof vt}function Ze(e){return e._writer!==void 0}function ur(e,n){var i;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=n,(i=e._writableStreamController._abortController)===null||i===void 0||i.abort();let l=e._state;if(l==="closed"||l==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;l==="erroring"&&(c=!0,n=void 0);let d=T((h,w)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:w,_reason:n,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=d,c||Sn(e,n),d}function Vo(e){let n=e._state;if(n==="closed"||n==="errored")return g(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let i=T((c,d)=>{let h={_resolve:c,_reject:d};e._closeRequest=h}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&vn(l),Xl(e._writableStreamController),i}function Wl(e){return T((i,l)=>{let c={_resolve:i,_reject:l};e._writeRequests.push(c)})}function gn(e,n){if(e._state==="writable"){Sn(e,n);return}_n(e)}function Sn(e,n){let i=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&Qo(l,n),!jl(e)&&i._started&&_n(e)}function _n(e){e._state="errored",e._writableStreamController[po]();let n=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(n)}),e._writeRequests=new K,e._pendingAbortRequest===void 0){cr(e);return}let i=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,i._wasAlreadyErroring){i._reject(n),cr(e);return}let l=e._writableStreamController[ho](i._reason);C(l,()=>{i._resolve(),cr(e)},c=>{i._reject(c),cr(e)})}function Ll(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function $l(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,gn(e,n)}function zl(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let i=e._writer;i!==void 0&&ni(i)}function Ml(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),gn(e,n)}function me(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function jl(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ul(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Nl(e){e._inFlightWriteRequest=e._writeRequests.shift()}function cr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Pn(n,e._storedError)}function wn(e,n){let i=e._writer;i!==void 0&&n!==e._backpressure&&(n?nu(i):vn(i)),e._backpressure=n}class kt{constructor(n){if(Se(n,1,"WritableStreamDefaultWriter"),No(n,"First parameter"),Ze(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let i=n._state;if(i==="writable")!me(n)&&n._backpressure?pr(this):oi(this),hr(this);else if(i==="erroring")An(this,n._storedError),hr(this);else if(i==="closed")oi(this),tu(this);else{let l=n._storedError;An(this,l),ri(this,l)}}get closed(){return $e(this)?this._closedPromise:g(ze("closed"))}get desiredSize(){if(!$e(this))throw ze("desiredSize");if(this._ownerWritableStream===void 0)throw It("desiredSize");return Yl(this)}get ready(){return $e(this)?this._readyPromise:g(ze("ready"))}abort(n=void 0){return $e(this)?this._ownerWritableStream===void 0?g(It("abort")):Hl(this,n):g(ze("abort"))}close(){if(!$e(this))return g(ze("close"));let n=this._ownerWritableStream;return n===void 0?g(It("close")):me(n)?g(new TypeError("Cannot close an already-closing stream")):Yo(this)}releaseLock(){if(!$e(this))throw ze("releaseLock");this._ownerWritableStream!==void 0&&Xo(this)}write(n=void 0){return $e(this)?this._ownerWritableStream===void 0?g(It("write to")):Ko(this,n):g(ze("write"))}}Object.defineProperties(kt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function $e(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof kt}function Hl(e,n){let i=e._ownerWritableStream;return ur(i,n)}function Yo(e){let n=e._ownerWritableStream;return Vo(n)}function Gl(e){let n=e._ownerWritableStream,i=n._state;return me(n)||i==="closed"?S(void 0):i==="errored"?g(n._storedError):Yo(e)}function Vl(e,n){e._closedPromiseState==="pending"?Pn(e,n):ru(e,n)}function Qo(e,n){e._readyPromiseState==="pending"?ii(e,n):ou(e,n)}function Yl(e){let n=e._ownerWritableStream,i=n._state;return i==="errored"||i==="erroring"?null:i==="closed"?0:ei(n._writableStreamController)}function Xo(e){let n=e._ownerWritableStream,i=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Qo(e,i),Vl(e,i),n._writer=void 0,e._ownerWritableStream=void 0}function Ko(e,n){let i=e._ownerWritableStream,l=i._writableStreamController,c=Kl(l,n);if(i!==e._ownerWritableStream)return g(It("write to"));let d=i._state;if(d==="errored")return g(i._storedError);if(me(i)||d==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return g(i._storedError);let h=Wl(i);return Zl(l,n,c),h}let Zo={};class Je{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Rn(this))throw Cn("abortReason");return this._abortReason}get signal(){if(!Rn(this))throw Cn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!Rn(this))throw Cn("error");this._controlledWritableStream._state==="writable"&&ti(this,n)}[ho](n){let i=this._abortAlgorithm(n);return fr(this),i}[po](){Pe(this)}}Object.defineProperties(Je.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Je.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Rn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Je}function Jo(e,n,i,l,c,d,h,w){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,Pe(n),n._abortReason=void 0,n._abortController=Fl(),n._started=!1,n._strategySizeAlgorithm=w,n._strategyHWM=h,n._writeAlgorithm=l,n._closeAlgorithm=c,n._abortAlgorithm=d;let E=En(n);wn(e,E);let x=i(),O=S(x);C(O,()=>{n._started=!0,dr(n)},q=>{n._started=!0,gn(e,q)})}function Ql(e,n,i,l){let c=Object.create(Je.prototype),d=()=>{},h=()=>S(void 0),w=()=>S(void 0),E=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(c)),n.write!==void 0&&(h=x=>n.write(x,c)),n.close!==void 0&&(w=()=>n.close()),n.abort!==void 0&&(E=x=>n.abort(x)),Jo(e,c,d,h,w,E,i,l)}function fr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Xl(e){fn(e,Zo,0),dr(e)}function Kl(e,n){try{return e._strategySizeAlgorithm(n)}catch(i){return Tn(e,i),1}}function ei(e){return e._strategyHWM-e._queueTotalSize}function Zl(e,n,i){try{fn(e,n,i)}catch(c){Tn(e,c);return}let l=e._controlledWritableStream;if(!me(l)&&l._state==="writable"){let c=En(e);wn(l,c)}dr(e)}function dr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){_n(n);return}if(e._queue.length===0)return;let l=Sl(e);l===Zo?Jl(e):eu(e,l)}function Tn(e,n){e._controlledWritableStream._state==="writable"&&ti(e,n)}function Jl(e){let n=e._controlledWritableStream;Ul(n),cn(e);let i=e._closeAlgorithm();fr(e),C(i,()=>{zl(n)},l=>{Ml(n,l)})}function eu(e,n){let i=e._controlledWritableStream;Nl(i);let l=e._writeAlgorithm(n);C(l,()=>{Ll(i);let c=i._state;if(cn(e),!me(i)&&c==="writable"){let d=En(e);wn(i,d)}dr(e)},c=>{i._state==="writable"&&fr(e),$l(i,c)})}function En(e){return ei(e)<=0}function ti(e,n){let i=e._controlledWritableStream;fr(e),Sn(i,n)}function mr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Cn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function ze(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function It(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function hr(e){e._closedPromise=T((n,i)=>{e._closedPromise_resolve=n,e._closedPromise_reject=i,e._closedPromiseState="pending"})}function ri(e,n){hr(e),Pn(e,n)}function tu(e){hr(e),ni(e)}function Pn(e,n){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function ru(e,n){ri(e,n)}function ni(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function pr(e){e._readyPromise=T((n,i)=>{e._readyPromise_resolve=n,e._readyPromise_reject=i}),e._readyPromiseState="pending"}function An(e,n){pr(e),ii(e,n)}function oi(e){pr(e),vn(e)}function ii(e,n){e._readyPromise_reject!==void 0&&(H(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function nu(e){pr(e)}function ou(e,n){An(e,n)}function vn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let ai=typeof DOMException<"u"?DOMException:void 0;function iu(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function au(){let e=function(i,l){this.message=i||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let su=iu(ai)?ai:au();function si(e,n,i,l,c,d){let h=Qe(e),w=Ho(n);e._disturbed=!0;let E=!1,x=S(void 0);return T((O,q)=>{let j;if(d!==void 0){if(j=()=>{let R=new su("Aborted","AbortError"),k=[];l||k.push(()=>n._state==="writable"?ur(n,R):S(void 0)),c||k.push(()=>e._state==="readable"?ue(e,R):S(void 0)),Q(()=>Promise.all(k.map(W=>W())),!0,R)},d.aborted){j();return}d.addEventListener("abort",j)}function ce(){return T((R,k)=>{function W(Z){Z?R():y(rt(),W,k)}W(!1)})}function rt(){return E?S(!0):y(w._readyPromise,()=>T((R,k)=>{wt(h,{_chunkSteps:W=>{x=y(Ko(w,W),void 0,o),R(!1)},_closeSteps:()=>R(!0),_errorSteps:k})}))}if(_e(e,h._closedPromise,R=>{l?oe(!0,R):Q(()=>ur(n,R),!0,R)}),_e(n,w._closedPromise,R=>{c?oe(!0,R):Q(()=>ue(e,R),!0,R)}),V(e,h._closedPromise,()=>{i?oe():Q(()=>Gl(w))}),me(n)||n._state==="closed"){let R=new TypeError("the destination writable stream closed before all data could be piped to it");c?oe(!0,R):Q(()=>ue(e,R),!0,R)}H(ce());function xe(){let R=x;return y(x,()=>R!==x?xe():void 0)}function _e(R,k,W){R._state==="errored"?W(R._storedError):v(k,W)}function V(R,k,W){R._state==="closed"?W():P(k,W)}function Q(R,k,W){if(E)return;E=!0,n._state==="writable"&&!me(n)?P(xe(),Z):Z();function Z(){C(R(),()=>we(k,W),nt=>we(!0,nt))}}function oe(R,k){E||(E=!0,n._state==="writable"&&!me(n)?P(xe(),()=>we(R,k)):we(R,k))}function we(R,k){Xo(w),ye(h),d!==void 0&&d.removeEventListener("abort",j),R?q(k):O(void 0)}})}class et{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!br(this))throw Sr("desiredSize");return kn(this)}close(){if(!br(this))throw Sr("close");if(!tt(this))throw new TypeError("The stream is not in a state that permits close");Bt(this)}enqueue(n=void 0){if(!br(this))throw Sr("enqueue");if(!tt(this))throw new TypeError("The stream is not in a state that permits enqueue");return gr(this,n)}error(n=void 0){if(!br(this))throw Sr("error");Ae(this,n)}[nn](n){Pe(this);let i=this._cancelAlgorithm(n);return yr(this),i}[on](n){let i=this._controlledReadableStream;if(this._queue.length>0){let l=cn(this);this._closeRequested&&this._queue.length===0?(yr(this),Ot(i)):xt(this),n._chunkSteps(l)}else _o(i,n),xt(this)}}Object.defineProperties(et.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(et.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function br(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof et}function xt(e){if(!li(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,xt(e))},l=>{Ae(e,l)})}function li(e){let n=e._controlledReadableStream;return!tt(e)||!e._started?!1:!!(Ie(n)&&Kt(n)>0||kn(e)>0)}function yr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Bt(e){if(!tt(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(yr(e),Ot(n))}function gr(e,n){if(!tt(e))return;let i=e._controlledReadableStream;if(Ie(i)&&Kt(i)>0)un(i,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(c){throw Ae(e,c),c}try{fn(e,n,l)}catch(c){throw Ae(e,c),c}}xt(e)}function Ae(e,n){let i=e._controlledReadableStream;i._state==="readable"&&(Pe(e),yr(e),di(i,n))}function kn(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function lu(e){return!li(e)}function tt(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function ui(e,n,i,l,c,d,h){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,Pe(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=h,n._strategyHWM=d,n._pullAlgorithm=l,n._cancelAlgorithm=c,e._readableStreamController=n;let w=i();C(S(w),()=>{n._started=!0,xt(n)},E=>{Ae(n,E)})}function uu(e,n,i,l){let c=Object.create(et.prototype),d=()=>{},h=()=>S(void 0),w=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(c)),n.pull!==void 0&&(h=()=>n.pull(c)),n.cancel!==void 0&&(w=E=>n.cancel(E)),ui(e,c,d,h,w,i,l)}function Sr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function cu(e,n){return De(e._readableStreamController)?du(e):fu(e)}function fu(e,n){let i=Qe(e),l=!1,c=!1,d=!1,h=!1,w,E,x,O,q,j=T(V=>{q=V});function ce(){return l?(c=!0,S(void 0)):(l=!0,wt(i,{_chunkSteps:Q=>{I(()=>{c=!1;let oe=Q,we=Q;d||gr(x._readableStreamController,oe),h||gr(O._readableStreamController,we),l=!1,c&&ce()})},_closeSteps:()=>{l=!1,d||Bt(x._readableStreamController),h||Bt(O._readableStreamController),(!d||!h)&&q(void 0)},_errorSteps:()=>{l=!1}}),S(void 0))}function rt(V){if(d=!0,w=V,h){let Q=Rt([w,E]),oe=ue(e,Q);q(oe)}return j}function xe(V){if(h=!0,E=V,d){let Q=Rt([w,E]),oe=ue(e,Q);q(oe)}return j}function _e(){}return x=In(_e,ce,rt),O=In(_e,ce,xe),v(i._closedPromise,V=>{Ae(x._readableStreamController,V),Ae(O._readableStreamController,V),(!d||!h)&&q(void 0)}),[x,O]}function du(e){let n=Qe(e),i=!1,l=!1,c=!1,d=!1,h=!1,w,E,x,O,q,j=T(R=>{q=R});function ce(R){v(R._closedPromise,k=>{R===n&&(le(x._readableStreamController,k),le(O._readableStreamController,k),(!d||!h)&&q(void 0))})}function rt(){Le(n)&&(ye(n),n=Qe(e),ce(n)),wt(n,{_chunkSteps:k=>{I(()=>{l=!1,c=!1;let W=k,Z=k;if(!d&&!h)try{Z=Io(k)}catch(nt){le(x._readableStreamController,nt),le(O._readableStreamController,nt),q(ue(e,nt));return}d||nr(x._readableStreamController,W),h||nr(O._readableStreamController,Z),i=!1,l?_e():c&&V()})},_closeSteps:()=>{i=!1,d||Et(x._readableStreamController),h||Et(O._readableStreamController),x._readableStreamController._pendingPullIntos.length>0&&or(x._readableStreamController,0),O._readableStreamController._pendingPullIntos.length>0&&or(O._readableStreamController,0),(!d||!h)&&q(void 0)},_errorSteps:()=>{i=!1}})}function xe(R,k){Ce(n)&&(ye(n),n=zo(e),ce(n));let W=k?O:x,Z=k?x:O;Uo(n,R,{_chunkSteps:ot=>{I(()=>{l=!1,c=!1;let it=k?h:d;if(k?d:h)it||ir(W._readableStreamController,ot);else{let Ci;try{Ci=Io(ot)}catch(Bn){le(W._readableStreamController,Bn),le(Z._readableStreamController,Bn),q(ue(e,Bn));return}it||ir(W._readableStreamController,ot),nr(Z._readableStreamController,Ci)}i=!1,l?_e():c&&V()})},_closeSteps:ot=>{i=!1;let it=k?h:d,vr=k?d:h;it||Et(W._readableStreamController),vr||Et(Z._readableStreamController),ot!==void 0&&(it||ir(W._readableStreamController,ot),!vr&&Z._readableStreamController._pendingPullIntos.length>0&&or(Z._readableStreamController,0)),(!it||!vr)&&q(void 0)},_errorSteps:()=>{i=!1}})}function _e(){if(i)return l=!0,S(void 0);i=!0;let R=pn(x._readableStreamController);return R===null?rt():xe(R._view,!1),S(void 0)}function V(){if(i)return c=!0,S(void 0);i=!0;let R=pn(O._readableStreamController);return R===null?rt():xe(R._view,!0),S(void 0)}function Q(R){if(d=!0,w=R,h){let k=Rt([w,E]),W=ue(e,k);q(W)}return j}function oe(R){if(h=!0,E=R,d){let k=Rt([w,E]),W=ue(e,k);q(W)}return j}function we(){}return x=fi(we,_e,Q),O=fi(we,V,oe),ce(n),[x,O]}function mu(e,n){ge(e,n);let i=e,l=i==null?void 0:i.autoAllocateChunkSize,c=i==null?void 0:i.cancel,d=i==null?void 0:i.pull,h=i==null?void 0:i.start,w=i==null?void 0:i.type;return{autoAllocateChunkSize:l===void 0?void 0:So(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:hu(c,i,`${n} has member 'cancel' that`),pull:d===void 0?void 0:pu(d,i,`${n} has member 'pull' that`),start:h===void 0?void 0:bu(h,i,`${n} has member 'start' that`),type:w===void 0?void 0:yu(w,`${n} has member 'type' that`)}}function hu(e,n,i){return se(e,i),l=>B(e,n,[l])}function pu(e,n,i){return se(e,i),l=>B(e,n,[l])}function bu(e,n,i){return se(e,i),l=>z(e,n,[l])}function yu(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function gu(e,n){ge(e,n);let i=e==null?void 0:e.mode;return{mode:i===void 0?void 0:Su(i,`${n} has member 'mode' that`)}}function Su(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function _u(e,n){ge(e,n);let i=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(i)}}function ci(e,n){ge(e,n);let i=e==null?void 0:e.preventAbort,l=e==null?void 0:e.preventCancel,c=e==null?void 0:e.preventClose,d=e==null?void 0:e.signal;return d!==void 0&&wu(d,`${n} has member 'signal' that`),{preventAbort:Boolean(i),preventCancel:Boolean(l),preventClose:Boolean(c),signal:d}}function wu(e,n){if(!Ol(e))throw new TypeError(`${n} is not an AbortSignal.`)}function Ru(e,n){ge(e,n);let i=e==null?void 0:e.readable;an(i,"readable","ReadableWritablePair"),ln(i,`${n} has member 'readable' that`);let l=e==null?void 0:e.writable;return an(l,"writable","ReadableWritablePair"),No(l,`${n} has member 'writable' that`),{readable:i,writable:l}}class ve{constructor(n={},i={}){n===void 0?n=null:yo(n,"First parameter");let l=lr(i,"Second parameter"),c=mu(n,"First parameter");if(xn(this),c.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=At(l,0);El(this,c,d)}else{let d=sr(l),h=At(l,1);uu(this,c,h,d)}}get locked(){if(!ke(this))throw Me("locked");return Ie(this)}cancel(n=void 0){return ke(this)?Ie(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):ue(this,n):g(Me("cancel"))}getReader(n=void 0){if(!ke(this))throw Me("getReader");return gu(n,"First parameter").mode===void 0?Qe(this):zo(this)}pipeThrough(n,i={}){if(!ke(this))throw Me("pipeThrough");Se(n,1,"pipeThrough");let l=Ru(n,"First parameter"),c=ci(i,"Second parameter");if(Ie(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ze(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=si(this,l.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return H(d),l.readable}pipeTo(n,i={}){if(!ke(this))return g(Me("pipeTo"));if(n===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!Ke(n))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=ci(i,"Second parameter")}catch(c){return g(c)}return Ie(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ze(n)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):si(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!ke(this))throw Me("tee");let n=cu(this);return Rt(n)}values(n=void 0){if(!ke(this))throw Me("values");let i=_u(n,"First parameter");return yl(this,i.preventCancel)}}Object.defineProperties(ve.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ve.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(ve.prototype,t.asyncIterator,{value:ve.prototype.values,writable:!0,configurable:!0});function In(e,n,i,l=1,c=()=>1){let d=Object.create(ve.prototype);xn(d);let h=Object.create(et.prototype);return ui(d,h,e,n,i,l,c),d}function fi(e,n,i){let l=Object.create(ve.prototype);xn(l);let c=Object.create(Xe.prototype);return $o(l,c,e,n,i,0,void 0),l}function xn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function ke(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof ve}function Ie(e){return e._reader!==void 0}function ue(e,n){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return g(e._storedError);Ot(e);let i=e._reader;i!==void 0&&Le(i)&&(i._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),i._readIntoRequests=new K);let l=e._readableStreamController[nn](n);return F(l,o)}function Ot(e){e._state="closed";let n=e._reader;n!==void 0&&(mo(n),Ce(n)&&(n._readRequests.forEach(i=>{i._closeSteps()}),n._readRequests=new K))}function di(e,n){e._state="errored",e._storedError=n;let i=e._reader;i!==void 0&&(rn(i,n),Ce(i)?(i._readRequests.forEach(l=>{l._errorSteps(n)}),i._readRequests=new K):(i._readIntoRequests.forEach(l=>{l._errorSteps(n)}),i._readIntoRequests=new K))}function Me(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function mi(e,n){ge(e,n);let i=e==null?void 0:e.highWaterMark;return an(i,"highWaterMark","QueuingStrategyInit"),{highWaterMark:sn(i)}}let hi=e=>e.byteLength;Object.defineProperty(hi,"name",{value:"size",configurable:!0});class _r{constructor(n){Se(n,1,"ByteLengthQueuingStrategy"),n=mi(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!bi(this))throw pi("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!bi(this))throw pi("size");return hi}}Object.defineProperties(_r.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(_r.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function pi(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function bi(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof _r}let yi=()=>1;Object.defineProperty(yi,"name",{value:"size",configurable:!0});class wr{constructor(n){Se(n,1,"CountQueuingStrategy"),n=mi(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Si(this))throw gi("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Si(this))throw gi("size");return yi}}Object.defineProperties(wr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(wr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function gi(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Si(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof wr}function Tu(e,n){ge(e,n);let i=e==null?void 0:e.flush,l=e==null?void 0:e.readableType,c=e==null?void 0:e.start,d=e==null?void 0:e.transform,h=e==null?void 0:e.writableType;return{flush:i===void 0?void 0:Eu(i,e,`${n} has member 'flush' that`),readableType:l,start:c===void 0?void 0:Cu(c,e,`${n} has member 'start' that`),transform:d===void 0?void 0:Pu(d,e,`${n} has member 'transform' that`),writableType:h}}function Eu(e,n,i){return se(e,i),l=>B(e,n,[l])}function Cu(e,n,i){return se(e,i),l=>z(e,n,[l])}function Pu(e,n,i){return se(e,i),(l,c)=>B(e,n,[l,c])}class Rr{constructor(n={},i={},l={}){n===void 0&&(n=null);let c=lr(i,"Second parameter"),d=lr(l,"Third parameter"),h=Tu(n,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let w=At(d,0),E=sr(d),x=At(c,1),O=sr(c),q,j=T(ce=>{q=ce});Au(this,j,x,O,w,E),ku(this,h),h.start!==void 0?q(h.start(this._transformStreamController)):q(void 0)}get readable(){if(!_i(this))throw Ei("readable");return this._readable}get writable(){if(!_i(this))throw Ei("writable");return this._writable}}Object.defineProperties(Rr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Rr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Au(e,n,i,l,c,d){function h(){return n}function w(j){return Bu(e,j)}function E(j){return Ou(e,j)}function x(){return qu(e)}e._writable=Dl(h,w,x,E,i,l);function O(){return Fu(e)}function q(j){return Er(e,j),S(void 0)}e._readable=In(h,O,q,c,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Cr(e,!0),e._transformStreamController=void 0}function _i(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Rr}function Tr(e,n){Ae(e._readable._readableStreamController,n),Er(e,n)}function Er(e,n){wi(e._transformStreamController),Tn(e._writable._writableStreamController,n),e._backpressure&&Cr(e,!1)}function Cr(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(i=>{e._backpressureChangePromise_resolve=i}),e._backpressure=n}class qt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Pr(this))throw Ar("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return kn(n)}enqueue(n=void 0){if(!Pr(this))throw Ar("enqueue");Ri(this,n)}error(n=void 0){if(!Pr(this))throw Ar("error");Iu(this,n)}terminate(){if(!Pr(this))throw Ar("terminate");xu(this)}}Object.defineProperties(qt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Pr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof qt}function vu(e,n,i,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=i,n._flushAlgorithm=l}function ku(e,n){let i=Object.create(qt.prototype),l=d=>{try{return Ri(i,d),S(void 0)}catch(h){return g(h)}},c=()=>S(void 0);n.transform!==void 0&&(l=d=>n.transform(d,i)),n.flush!==void 0&&(c=()=>n.flush(i)),vu(e,i,l,c)}function wi(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Ri(e,n){let i=e._controlledTransformStream,l=i._readable._readableStreamController;if(!tt(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{gr(l,n)}catch(d){throw Er(i,d),i._readable._storedError}lu(l)!==i._backpressure&&Cr(i,!0)}function Iu(e,n){Tr(e._controlledTransformStream,n)}function Ti(e,n){let i=e._transformAlgorithm(n);return F(i,void 0,l=>{throw Tr(e._controlledTransformStream,l),l})}function xu(e){let n=e._controlledTransformStream,i=n._readable._readableStreamController;Bt(i);let l=new TypeError("TransformStream terminated");Er(n,l)}function Bu(e,n){let i=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return F(l,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return Ti(i,n)})}return Ti(i,n)}function Ou(e,n){return Tr(e,n),S(void 0)}function qu(e){let n=e._readable,i=e._transformStreamController,l=i._flushAlgorithm();return wi(i),F(l,()=>{if(n._state==="errored")throw n._storedError;Bt(n._readableStreamController)},c=>{throw Tr(e,c),n._storedError})}function Fu(e){return Cr(e,!1),e._backpressureChangePromise}function Ar(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Ei(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=_r,r.CountQueuingStrategy=wr,r.ReadableByteStreamController=Xe,r.ReadableStream=ve,r.ReadableStreamBYOBReader=Pt,r.ReadableStreamBYOBRequest=Tt,r.ReadableStreamDefaultController=et,r.ReadableStreamDefaultReader=_t,r.TransformStream=Rr,r.TransformStreamDefaultController=qt,r.WritableStream=vt,r.WritableStreamDefaultController=Je,r.WritableStreamDefaultWriter=kt,Object.defineProperty(r,"__esModule",{value:!0})})});var ji=A(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,Mi())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let a=0,s=this;return new ReadableStream({type:"bytes",async pull(u){let p=await s.slice(a,Math.min(s.size,a+65536)).arrayBuffer();a+=p.byteLength,u.enqueue(new Uint8Array(p)),a===s.size&&u.close()}})})}catch{}});async function*On(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let a=o.byteOffset,s=o.byteOffset+o.byteLength;for(;a!==s;){let u=Math.min(s-a,Ui),f=o.buffer.slice(a,a+u);a+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let a=0,s=o;for(;a!==s.size;){let f=await s.slice(a,Math.min(s.size,a+Ui)).arrayBuffer();a+=f.byteLength,yield new Uint8Array(f)}}}var _d,Ui,Ni,Hu,Re,Wt=Dt(()=>{_d=fe(ji(),1);Ui=65536;Ni=class qn{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let a=new TextEncoder;for(let u of t){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof qn?f=u:f=a.encode(`${u}`),this.#r+=ArrayBuffer.isView(f)?f.byteLength:f.size,this.#e.push(f)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let a of On(this.#e,!1))o+=t.decode(a,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let a of On(this.#e,!1))t.set(a,o),o+=a.length;return t.buffer}stream(){let t=On(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let a=await t.next();a.done?o.close():o.enqueue(a.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,a=""){let{size:s}=this,u=t<0?Math.max(s+t,0):Math.min(t,s),f=o<0?Math.max(s+o,0):Math.min(o,s),p=Math.max(f-u,0),m=this.#e,b=[],_=0;for(let S of m){if(_>=p)break;let g=ArrayBuffer.isView(S)?S.byteLength:S.size;if(u&&g<=u)u-=g,f-=g;else{let y;ArrayBuffer.isView(S)?(y=S.subarray(u,Math.min(g,f)),_+=y.byteLength):(y=S.slice(u,Math.min(g,f)),_+=y.size),f-=g,b.push(y),u=0}}let T=new qn([],{type:String(a).toLowerCase()});return T.#r=p,T.#e=b,T}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(Ni.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Hu=Ni,Re=Hu});var Gu,Vu,st,Fn=Dt(()=>{Wt();Gu=class extends Re{#e=0;#t="";constructor(t,o,a={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,a);a===null&&(a={});let s=a.lastModified===void 0?Date.now():Number(a.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Re&&/^(File)$/.test(t[Symbol.toStringTag])}},Vu=Gu,st=Vu});function Vi(r,t=Re){var o=`${Hi()}${Hi()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),a=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((u,f)=>typeof u=="string"?a.push(s+Dn(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):a.push(s+Dn(f)+`"; filename="${Dn(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),a.push(`--${o}--`),new t(a,{type:"multipart/form-data; boundary="+o})}var Lt,Yu,Qu,Hi,Xu,Gi,Dn,je,Ue,Ir=Dt(()=>{Wt();Fn();({toStringTag:Lt,iterator:Yu,hasInstance:Qu}=Symbol),Hi=Math.random,Xu="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Gi=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[Lt])?[(o=o!==void 0?o+"":t[Lt]=="File"?t.name:"blob",r),t.name!==o||t[Lt]=="blob"?new st([t],o,t):t]:[r,t+""]),Dn=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),je=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},Ue=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Lt](){return"FormData"}[Yu](){return this.entries()}static[Qu](t){return t&&typeof t=="object"&&t[Lt]==="FormData"&&!Xu.some(o=>typeof t[o]!="function")}append(...t){je("append",arguments,2),this.#e.push(Gi(...t))}delete(t){je("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){je("get",arguments,1),t+="";for(var o=this.#e,a=o.length,s=0;s<a;s++)if(o[s][0]===t)return o[s][1];return null}getAll(t,o){return je("getAll",arguments,1),o=[],t+="",this.#e.forEach(a=>a[0]===t&&o.push(a[1])),o}has(t){return je("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){je("forEach",arguments,1);for(var[a,s]of this)t.call(o,s,a,this)}set(...t){je("set",arguments,2);var o=[],a=!0;t=Gi(...t),this.#e.forEach(s=>{s[0]===t[0]?a&&(a=!o.push(t)):o.push(s)}),a&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Ki=A((Od,Xi)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}Xi.exports=globalThis.DOMException});var zt,Zi,Ku,Ln,$n=Dt(()=>{zt=require("node:fs"),Zi=fe(Ki(),1);Fn();Wt();({stat:Ku}=zt.promises),Ln=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new Ln({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await Ku(this.#e);if(t>this.lastModified)throw new Zi.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,zt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var ta={};Ii(ta,{toFormData:()=>oc});function nc(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",a=o.slice(o.lastIndexOf("\\")+1);return a=a.replace(/%22/g,'"'),a=a.replace(/&#(\d{4});/g,(s,u)=>String.fromCharCode(u)),a}async function oc(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let a=new ea(o[1]||o[2]),s,u,f,p,m,b,_=[],T=new Ue,S=v=>{f+=P.decode(v,{stream:!0})},g=v=>{_.push(v)},y=()=>{let v=new st(_,b,{type:m});T.append(p,v)},C=()=>{T.append(p,f)},P=new TextDecoder("utf-8");P.decode(),a.onPartBegin=function(){a.onPartData=S,a.onPartEnd=C,s="",u="",f="",p="",m="",b=null,_.length=0},a.onHeaderField=function(v){s+=P.decode(v,{stream:!0})},a.onHeaderValue=function(v){u+=P.decode(v,{stream:!0})},a.onHeaderEnd=function(){if(u+=P.decode(),s=s.toLowerCase(),s==="content-disposition"){let v=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(p=v[2]||v[3]||""),b=nc(u),b&&(a.onPartData=g,a.onPartEnd=y)}else s==="content-type"&&(m=u);u="",s=""};for await(let v of r)a.write(v);return a.end(),T}var he,L,Ji,Oe,Br,Or,Zu,Mt,Ju,ec,tc,rc,Ne,ea,ra=Dt(()=>{$n();Ir();he=0,L={START_BOUNDARY:he++,HEADER_FIELD_START:he++,HEADER_FIELD:he++,HEADER_VALUE_START:he++,HEADER_VALUE:he++,HEADER_VALUE_ALMOST_DONE:he++,HEADERS_ALMOST_DONE:he++,PART_DATA_START:he++,PART_DATA:he++,END:he++},Ji=1,Oe={PART_BOUNDARY:Ji,LAST_BOUNDARY:Ji*=2},Br=10,Or=13,Zu=32,Mt=45,Ju=58,ec=97,tc=122,rc=r=>r|32,Ne=()=>{},ea=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Ne,this.onHeaderField=Ne,this.onHeadersEnd=Ne,this.onHeaderValue=Ne,this.onPartBegin=Ne,this.onPartData=Ne,this.onPartEnd=Ne,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let a=0;a<t.length;a++)o[a]=t.charCodeAt(a),this.boundaryChars[o[a]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=L.START_BOUNDARY}write(t){let o=0,a=t.length,s=this.index,{lookbehind:u,boundary:f,boundaryChars:p,index:m,state:b,flags:_}=this,T=this.boundary.length,S=T-1,g=t.length,y,C,P=I=>{this[I+"Mark"]=o},v=I=>{delete this[I+"Mark"]},F=(I,z,B,ae)=>{(z===void 0||z!==B)&&this[I](ae&&ae.subarray(z,B))},H=(I,z)=>{let B=I+"Mark";B in this&&(z?(F(I,this[B],o,t),delete this[B]):(F(I,this[B],t.length,t),this[B]=0))};for(o=0;o<a;o++)switch(y=t[o],b){case L.START_BOUNDARY:if(m===f.length-2){if(y===Mt)_|=Oe.LAST_BOUNDARY;else if(y!==Or)return;m++;break}else if(m-1===f.length-2){if(_&Oe.LAST_BOUNDARY&&y===Mt)b=L.END,_=0;else if(!(_&Oe.LAST_BOUNDARY)&&y===Br)m=0,F("onPartBegin"),b=L.HEADER_FIELD_START;else return;break}y!==f[m+2]&&(m=-2),y===f[m+2]&&m++;break;case L.HEADER_FIELD_START:b=L.HEADER_FIELD,P("onHeaderField"),m=0;case L.HEADER_FIELD:if(y===Or){v("onHeaderField"),b=L.HEADERS_ALMOST_DONE;break}if(m++,y===Mt)break;if(y===Ju){if(m===1)return;H("onHeaderField",!0),b=L.HEADER_VALUE_START;break}if(C=rc(y),C<ec||C>tc)return;break;case L.HEADER_VALUE_START:if(y===Zu)break;P("onHeaderValue"),b=L.HEADER_VALUE;case L.HEADER_VALUE:y===Or&&(H("onHeaderValue",!0),F("onHeaderEnd"),b=L.HEADER_VALUE_ALMOST_DONE);break;case L.HEADER_VALUE_ALMOST_DONE:if(y!==Br)return;b=L.HEADER_FIELD_START;break;case L.HEADERS_ALMOST_DONE:if(y!==Br)return;F("onHeadersEnd"),b=L.PART_DATA_START;break;case L.PART_DATA_START:b=L.PART_DATA,P("onPartData");case L.PART_DATA:if(s=m,m===0){for(o+=S;o<g&&!(t[o]in p);)o+=T;o-=S,y=t[o]}if(m<f.length)f[m]===y?(m===0&&H("onPartData",!0),m++):m=0;else if(m===f.length)m++,y===Or?_|=Oe.PART_BOUNDARY:y===Mt?_|=Oe.LAST_BOUNDARY:m=0;else if(m-1===f.length)if(_&Oe.PART_BOUNDARY){if(m=0,y===Br){_&=~Oe.PART_BOUNDARY,F("onPartEnd"),F("onPartBegin"),b=L.HEADER_FIELD_START;break}}else _&Oe.LAST_BOUNDARY&&y===Mt?(F("onPartEnd"),b=L.END,_=0):m=0;if(m>0)u[m-1]=y;else if(s>0){let I=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);F("onPartData",0,s,I),s=0,P("onPartData"),o--}break;case L.END:break;default:throw new Error(`Unexpected state entered: ${b}`)}H("onHeaderField"),H("onHeaderValue"),H("onPartData"),this.index=m,this.state=b,this.flags=_}end(){if(this.state===L.HEADER_FIELD_START&&this.index===0||this.state===L.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==L.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Ea=A((Pm,Ta)=>{Ta.exports=Ra;Ra.sync=hc;var _a=require("fs");function mc(r,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var a=0;a<o.length;a++){var s=o[a].toLowerCase();if(s&&r.substr(-s.length).toLowerCase()===s)return!0}return!1}function wa(r,t,o){return!r.isSymbolicLink()&&!r.isFile()?!1:mc(t,o)}function Ra(r,t,o){_a.stat(r,function(a,s){o(a,a?!1:wa(s,r,t))})}function hc(r,t){return wa(_a.statSync(r),r,t)}});var ka=A((Am,va)=>{va.exports=Pa;Pa.sync=pc;var Ca=require("fs");function Pa(r,t,o){Ca.stat(r,function(a,s){o(a,a?!1:Aa(s,t))})}function pc(r,t){return Aa(Ca.statSync(r),t)}function Aa(r,t){return r.isFile()&&bc(r,t)}function bc(r,t){var o=r.mode,a=r.uid,s=r.gid,u=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),f=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),p=parseInt("100",8),m=parseInt("010",8),b=parseInt("001",8),_=p|m,T=o&b||o&m&&s===f||o&p&&a===u||o&_&&u===0;return T}});var xa=A((km,Ia)=>{var vm=require("fs"),zr;process.platform==="win32"||global.TESTING_WINDOWS?zr=Ea():zr=ka();Ia.exports=jn;jn.sync=yc;function jn(r,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(a,s){jn(r,t||{},function(u,f){u?s(u):a(f)})})}zr(r,t||{},function(a,s){a&&(a.code==="EACCES"||t&&t.ignoreErrors)&&(a=null,s=!1),o(a,s)})}function yc(r,t){try{return zr.sync(r,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var La=A((Im,Wa)=>{var ft=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Ba=require("path"),gc=ft?";":":",Oa=xa(),qa=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),Fa=(r,t)=>{let o=t.colon||gc,a=r.match(/\//)||ft&&r.match(/\\/)?[""]:[...ft?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],s=ft?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=ft?s.split(o):[""];return ft&&r.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:a,pathExt:u,pathExtExe:s}},Da=(r,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:a,pathExt:s,pathExtExe:u}=Fa(r,t),f=[],p=b=>new Promise((_,T)=>{if(b===a.length)return t.all&&f.length?_(f):T(qa(r));let S=a[b],g=/^".*"$/.test(S)?S.slice(1,-1):S,y=Ba.join(g,r),C=!g&&/^\.[\\\/]/.test(r)?r.slice(0,2)+y:y;_(m(C,b,0))}),m=(b,_,T)=>new Promise((S,g)=>{if(T===s.length)return S(p(_+1));let y=s[T];Oa(b+y,{pathExt:u},(C,P)=>{if(!C&&P)if(t.all)f.push(b+y);else return S(b+y);return S(m(b,_,T+1))})});return o?p(0).then(b=>o(null,b),o):p(0)},Sc=(r,t)=>{t=t||{};let{pathEnv:o,pathExt:a,pathExtExe:s}=Fa(r,t),u=[];for(let f=0;f<o.length;f++){let p=o[f],m=/^".*"$/.test(p)?p.slice(1,-1):p,b=Ba.join(m,r),_=!m&&/^\.[\\\/]/.test(r)?r.slice(0,2)+b:b;for(let T=0;T<a.length;T++){let S=_+a[T];try{if(Oa.sync(S,{pathExt:s}))if(t.all)u.push(S);else return S}catch{}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw qa(r)};Wa.exports=Da;Da.sync=Sc});var Nn=A((xm,Un)=>{"use strict";var $a=(r={})=>{let t=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(a=>a.toUpperCase()==="PATH")||"Path"};Un.exports=$a;Un.exports.default=$a});var Ua=A((Bm,ja)=>{"use strict";var za=require("path"),_c=La(),wc=Nn();function Ma(r,t){let o=r.options.env||process.env,a=process.cwd(),s=r.options.cwd!=null,u=s&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(r.options.cwd)}catch{}let f;try{f=_c.sync(r.command,{path:o[wc({env:o})],pathExt:t?za.delimiter:void 0})}catch{}finally{u&&process.chdir(a)}return f&&(f=za.resolve(s?r.options.cwd:"",f)),f}function Rc(r){return Ma(r)||Ma(r,!0)}ja.exports=Rc});var Na=A((Om,Gn)=>{"use strict";var Hn=/([()\][%!^"`<>&|;, *?])/g;function Tc(r){return r=r.replace(Hn,"^$1"),r}function Ec(r,t){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(Hn,"^$1"),t&&(r=r.replace(Hn,"^$1")),r}Gn.exports.command=Tc;Gn.exports.argument=Ec});var Ga=A((qm,Ha)=>{"use strict";Ha.exports=/^#!(.*)/});var Ya=A((Fm,Va)=>{"use strict";var Cc=Ga();Va.exports=(r="")=>{let t=r.match(Cc);if(!t)return null;let[o,a]=t[0].replace(/#! ?/,"").split(" "),s=o.split("/").pop();return s==="env"?a:a?`${s} ${a}`:s}});var Xa=A((Dm,Qa)=>{"use strict";var Vn=require("fs"),Pc=Ya();function Ac(r){let o=Buffer.alloc(150),a;try{a=Vn.openSync(r,"r"),Vn.readSync(a,o,0,150,0),Vn.closeSync(a)}catch{}return Pc(o.toString())}Qa.exports=Ac});var es=A((Wm,Ja)=>{"use strict";var vc=require("path"),Ka=Ua(),Za=Na(),kc=Xa(),Ic=process.platform==="win32",xc=/\.(?:com|exe)$/i,Bc=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Oc(r){r.file=Ka(r);let t=r.file&&kc(r.file);return t?(r.args.unshift(r.file),r.command=t,Ka(r)):r.file}function qc(r){if(!Ic)return r;let t=Oc(r),o=!xc.test(t);if(r.options.forceShell||o){let a=Bc.test(t);r.command=vc.normalize(r.command),r.command=Za.command(r.command),r.args=r.args.map(u=>Za.argument(u,a));let s=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${s}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function Fc(r,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let a={command:r,args:t,options:o,file:void 0,original:{command:r,args:t}};return o.shell?a:qc(a)}Ja.exports=Fc});var ns=A((Lm,rs)=>{"use strict";var Yn=process.platform==="win32";function Qn(r,t){return Object.assign(new Error(`${t} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${r.command}`,path:r.command,spawnargs:r.args})}function Dc(r,t){if(!Yn)return;let o=r.emit;r.emit=function(a,s){if(a==="exit"){let u=ts(s,t,"spawn");if(u)return o.call(r,"error",u)}return o.apply(r,arguments)}}function ts(r,t){return Yn&&r===1&&!t.file?Qn(t.original,"spawn"):null}function Wc(r,t){return Yn&&r===1&&!t.file?Qn(t.original,"spawnSync"):null}rs.exports={hookChildProcess:Dc,verifyENOENT:ts,verifyENOENTSync:Wc,notFoundError:Qn}});var as=A(($m,dt)=>{"use strict";var os=require("child_process"),Xn=es(),Kn=ns();function is(r,t,o){let a=Xn(r,t,o),s=os.spawn(a.command,a.args,a.options);return Kn.hookChildProcess(s,a),s}function Lc(r,t,o){let a=Xn(r,t,o),s=os.spawnSync(a.command,a.args,a.options);return s.error=s.error||Kn.verifyENOENTSync(s.status,a),s}dt.exports=is;dt.exports.spawn=is;dt.exports.sync=Lc;dt.exports._parse=Xn;dt.exports._enoent=Kn});var ls=A((zm,ss)=>{"use strict";ss.exports=r=>{let t=typeof r=="string"?`
`:`
`.charCodeAt(),o=typeof r=="string"?"\r":"\r".charCodeAt();return r[r.length-1]===t&&(r=r.slice(0,r.length-1)),r[r.length-1]===o&&(r=r.slice(0,r.length-1)),r}});var fs=A((Mm,Gt)=>{"use strict";var Ht=require("path"),us=Nn(),cs=r=>{r=M({cwd:process.cwd(),path:process.env[us()],execPath:process.execPath},r);let t,o=Ht.resolve(r.cwd),a=[];for(;t!==o;)a.push(Ht.join(o,"node_modules/.bin")),t=o,o=Ht.resolve(o,"..");let s=Ht.resolve(r.cwd,r.execPath,"..");return a.push(s),a.concat(r.path).join(Ht.delimiter)};Gt.exports=cs;Gt.exports.default=cs;Gt.exports.env=r=>{r=M({env:process.env},r);let t=M({},r.env),o=us({env:t});return r.path=t[o],t[o]=Gt.exports(r),t}});var ms=A((jm,Zn)=>{"use strict";var ds=(r,t)=>{for(let o of Reflect.ownKeys(t))Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o));return r};Zn.exports=ds;Zn.exports.default=ds});var ps=A((Um,jr)=>{"use strict";var $c=ms(),Mr=new WeakMap,hs=(r,t={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let o,a=0,s=r.displayName||r.name||"<anonymous>",u=function(...f){if(Mr.set(u,++a),a===1)o=r.apply(this,f),r=null;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return o};return $c(u,r),Mr.set(u,a),u};jr.exports=hs;jr.exports.default=hs;jr.exports.callCount=r=>{if(!Mr.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return Mr.get(r)}});var bs=A(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.SIGNALS=void 0;var zc=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Ur.SIGNALS=zc});var Jn=A(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.SIGRTMAX=mt.getRealtimeSignals=void 0;var Mc=function(){let r=gs-ys+1;return Array.from({length:r},jc)};mt.getRealtimeSignals=Mc;var jc=function(r,t){return{name:`SIGRT${t+1}`,number:ys+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},ys=34,gs=64;mt.SIGRTMAX=gs});var Ss=A(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.getSignals=void 0;var Uc=require("os"),Nc=bs(),Hc=Jn(),Gc=function(){let r=(0,Hc.getRealtimeSignals)();return[...Nc.SIGNALS,...r].map(Vc)};Nr.getSignals=Gc;var Vc=function({name:r,number:t,description:o,action:a,forced:s=!1,standard:u}){let{signals:{[r]:f}}=Uc.constants,p=f!==void 0;return{name:r,number:p?f:t,description:o,supported:p,action:a,forced:s,standard:u}}});var ws=A(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.signalsByNumber=ht.signalsByName=void 0;var Yc=require("os"),_s=Ss(),Qc=Jn(),Xc=function(){return(0,_s.getSignals)().reduce(Kc,{})},Kc=function(r,{name:t,number:o,description:a,supported:s,action:u,forced:f,standard:p}){return J(M({},r),{[t]:{name:t,number:o,description:a,supported:s,action:u,forced:f,standard:p}})},Zc=Xc();ht.signalsByName=Zc;var Jc=function(){let r=(0,_s.getSignals)(),t=Qc.SIGRTMAX+1,o=Array.from({length:t},(a,s)=>ef(s,r));return Object.assign({},...o)},ef=function(r,t){let o=tf(r,t);if(o===void 0)return{};let{name:a,description:s,supported:u,action:f,forced:p,standard:m}=o;return{[r]:{name:a,number:r,description:s,supported:u,action:f,forced:p,standard:m}}},tf=function(r,t){let o=t.find(({name:a})=>Yc.constants.signals[a]===r);return o!==void 0?o:t.find(a=>a.number===r)},rf=Jc();ht.signalsByNumber=rf});var Ts=A((Ym,Rs)=>{"use strict";var{signalsByName:nf}=ws(),of=({timedOut:r,timeout:t,errorCode:o,signal:a,signalDescription:s,exitCode:u,isCanceled:f})=>r?`timed out after ${t} milliseconds`:f?"was canceled":o!==void 0?`failed with ${o}`:a!==void 0?`was killed with ${a} (${s})`:u!==void 0?`failed with exit code ${u}`:"failed",af=({stdout:r,stderr:t,all:o,error:a,signal:s,exitCode:u,command:f,escapedCommand:p,timedOut:m,isCanceled:b,killed:_,parsed:{options:{timeout:T}}})=>{u=u===null?void 0:u,s=s===null?void 0:s;let S=s===void 0?void 0:nf[s].description,g=a&&a.code,C=`Command ${of({timedOut:m,timeout:T,errorCode:g,signal:s,signalDescription:S,exitCode:u,isCanceled:b})}: ${f}`,P=Object.prototype.toString.call(a)==="[object Error]",v=P?`${C}
${a.message}`:C,F=[v,t,r].filter(Boolean).join(`
`);return P?(a.originalMessage=a.message,a.message=F):a=new Error(F),a.shortMessage=v,a.command=f,a.escapedCommand=p,a.exitCode=u,a.signal=s,a.signalDescription=S,a.stdout=r,a.stderr=t,o!==void 0&&(a.all=o),"bufferedData"in a&&delete a.bufferedData,a.failed=!0,a.timedOut=Boolean(m),a.isCanceled=b,a.killed=_&&!m,a};Rs.exports=af});var Cs=A((Qm,eo)=>{"use strict";var Hr=["stdin","stdout","stderr"],sf=r=>Hr.some(t=>r[t]!==void 0),Es=r=>{if(!r)return;let{stdio:t}=r;if(t===void 0)return Hr.map(a=>r[a]);if(sf(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Hr.map(a=>`\`${a}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,Hr.length);return Array.from({length:o},(a,s)=>t[s])};eo.exports=Es;eo.exports.node=r=>{let t=Es(r);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var Ps=A((Xm,Gr)=>{Gr.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Gr.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Gr.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var xs=A((Km,yt)=>{var $=global.process,Ge=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};Ge($)?(As=require("assert"),pt=Ps(),vs=/^win/i.test($.platform),Vt=require("events"),typeof Vt!="function"&&(Vt=Vt.EventEmitter),$.__signal_exit_emitter__?N=$.__signal_exit_emitter__:(N=$.__signal_exit_emitter__=new Vt,N.count=0,N.emitted={}),N.infinite||(N.setMaxListeners(1/0),N.infinite=!0),yt.exports=function(r,t){if(!!Ge(global.process)){As.equal(typeof r,"function","a callback must be provided for exit handler"),bt===!1&&to();var o="exit";t&&t.alwaysLast&&(o="afterexit");var a=function(){N.removeListener(o,r),N.listeners("exit").length===0&&N.listeners("afterexit").length===0&&Vr()};return N.on(o,r),a}},Vr=function(){!bt||!Ge(global.process)||(bt=!1,pt.forEach(function(t){try{$.removeListener(t,Yr[t])}catch{}}),$.emit=Qr,$.reallyExit=ro,N.count-=1)},yt.exports.unload=Vr,Ve=function(t,o,a){N.emitted[t]||(N.emitted[t]=!0,N.emit(t,o,a))},Yr={},pt.forEach(function(r){Yr[r]=function(){if(!!Ge(global.process)){var o=$.listeners(r);o.length===N.count&&(Vr(),Ve("exit",null,r),Ve("afterexit",null,r),vs&&r==="SIGHUP"&&(r="SIGINT"),$.kill($.pid,r))}}}),yt.exports.signals=function(){return pt},bt=!1,to=function(){bt||!Ge(global.process)||(bt=!0,N.count+=1,pt=pt.filter(function(t){try{return $.on(t,Yr[t]),!0}catch{return!1}}),$.emit=Is,$.reallyExit=ks)},yt.exports.load=to,ro=$.reallyExit,ks=function(t){!Ge(global.process)||($.exitCode=t||0,Ve("exit",$.exitCode,null),Ve("afterexit",$.exitCode,null),ro.call($,$.exitCode))},Qr=$.emit,Is=function(t,o){if(t==="exit"&&Ge(global.process)){o!==void 0&&($.exitCode=o);var a=Qr.apply(this,arguments);return Ve("exit",$.exitCode,null),Ve("afterexit",$.exitCode,null),a}else return Qr.apply(this,arguments)}):yt.exports=function(){};var As,pt,vs,Vt,N,Vr,Ve,Yr,bt,to,ro,ks,Qr,Is});var Os=A((Zm,Bs)=>{"use strict";var lf=require("os"),uf=xs(),cf=1e3*5,ff=(r,t="SIGTERM",o={})=>{let a=r(t);return df(r,t,o,a),a},df=(r,t,o,a)=>{if(!mf(t,o,a))return;let s=pf(o),u=setTimeout(()=>{r("SIGKILL")},s);u.unref&&u.unref()},mf=(r,{forceKillAfterTimeout:t},o)=>hf(r)&&t!==!1&&o,hf=r=>r===lf.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",pf=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return cf;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},bf=(r,t)=>{r.kill()&&(t.isCanceled=!0)},yf=(r,t,o)=>{r.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},gf=(r,{timeout:t,killSignal:o="SIGTERM"},a)=>{if(t===0||t===void 0)return a;let s,u=new Promise((p,m)=>{s=setTimeout(()=>{yf(r,o,m)},t)}),f=a.finally(()=>{clearTimeout(s)});return Promise.race([u,f])},Sf=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},_f=async(r,{cleanup:t,detached:o},a)=>{if(!t||o)return a;let s=uf(()=>{r.kill()});return a.finally(()=>{s()})};Bs.exports={spawnedKill:ff,spawnedCancel:bf,setupTimeout:gf,validateTimeout:Sf,setExitHandler:_f}});var Fs=A((Jm,qs)=>{"use strict";var be=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";be.writable=r=>be(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";be.readable=r=>be(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";be.duplex=r=>be.writable(r)&&be.readable(r);be.transform=r=>be.duplex(r)&&typeof r._transform=="function";qs.exports=be});var Ws=A((eh,Ds)=>{"use strict";var{PassThrough:wf}=require("stream");Ds.exports=r=>{r=M({},r);let{array:t}=r,{encoding:o}=r,a=o==="buffer",s=!1;t?s=!(o||a):o=o||"utf8",a&&(o=null);let u=new wf({objectMode:s});o&&u.setEncoding(o);let f=0,p=[];return u.on("data",m=>{p.push(m),s?f=p.length:f+=m.length}),u.getBufferedValue=()=>t?p:a?Buffer.concat(p,f):p.join(""),u.getBufferedLength=()=>f,u}});var Ls=A((th,Yt)=>{"use strict";var{constants:Rf}=require("buffer"),Tf=require("stream"),{promisify:Ef}=require("util"),Cf=Ws(),Pf=Ef(Tf.pipeline),no=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function oo(r,t){if(!r)throw new Error("Expected a stream");t=M({maxBuffer:1/0},t);let{maxBuffer:o}=t,a=Cf(t);return await new Promise((s,u)=>{let f=p=>{p&&a.getBufferedLength()<=Rf.MAX_LENGTH&&(p.bufferedData=a.getBufferedValue()),u(p)};(async()=>{try{await Pf(r,a),s()}catch(p){f(p)}})(),a.on("data",()=>{a.getBufferedLength()>o&&f(new no)})}),a.getBufferedValue()}Yt.exports=oo;Yt.exports.buffer=(r,t)=>oo(r,J(M({},t),{encoding:"buffer"}));Yt.exports.array=(r,t)=>oo(r,J(M({},t),{array:!0}));Yt.exports.MaxBufferError=no});var zs=A((rh,$s)=>{"use strict";var{PassThrough:Af}=require("stream");$s.exports=function(){var r=[],t=new Af({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=a,t.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(o),t;function o(u){return Array.isArray(u)?(u.forEach(o),this):(r.push(u),u.once("end",s.bind(null,u)),u.once("error",t.emit.bind(t,"error")),u.pipe(t,{end:!1}),this)}function a(){return r.length==0}function s(u){r=r.filter(function(f){return f!==u}),!r.length&&t.readable&&t.end()}}});var Ns=A((nh,Us)=>{"use strict";var js=Fs(),Ms=Ls(),vf=zs(),kf=(r,t)=>{t===void 0||r.stdin===void 0||(js(t)?t.pipe(r.stdin):r.stdin.end(t))},If=(r,{all:t})=>{if(!t||!r.stdout&&!r.stderr)return;let o=vf();return r.stdout&&o.add(r.stdout),r.stderr&&o.add(r.stderr),o},io=async(r,t)=>{if(!!r){r.destroy();try{return await t}catch(o){return o.bufferedData}}},ao=(r,{encoding:t,buffer:o,maxBuffer:a})=>{if(!(!r||!o))return t?Ms(r,{encoding:t,maxBuffer:a}):Ms.buffer(r,{maxBuffer:a})},xf=async({stdout:r,stderr:t,all:o},{encoding:a,buffer:s,maxBuffer:u},f)=>{let p=ao(r,{encoding:a,buffer:s,maxBuffer:u}),m=ao(t,{encoding:a,buffer:s,maxBuffer:u}),b=ao(o,{encoding:a,buffer:s,maxBuffer:u*2});try{return await Promise.all([f,p,m,b])}catch(_){return Promise.all([{error:_,signal:_.signal,timedOut:_.timedOut},io(r,p),io(t,m),io(o,b)])}},Bf=({input:r})=>{if(js(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};Us.exports={handleInput:kf,makeAllStream:If,getSpawnedResult:xf,validateInputSync:Bf}});var Gs=A((oh,Hs)=>{"use strict";var Of=(async()=>{})().constructor.prototype,qf=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(Of,r)]),Ff=(r,t)=>{for(let[o,a]of qf){let s=typeof t=="function"?(...u)=>Reflect.apply(a.value,t(),u):a.value.bind(t);Reflect.defineProperty(r,o,J(M({},a),{value:s}))}return r},Df=r=>new Promise((t,o)=>{r.on("exit",(a,s)=>{t({exitCode:a,signal:s})}),r.on("error",a=>{o(a)}),r.stdin&&r.stdin.on("error",a=>{o(a)})});Hs.exports={mergePromise:Ff,getSpawnedPromise:Df}});var Qs=A((ih,Ys)=>{"use strict";var Vs=(r,t=[])=>Array.isArray(t)?[r,...t]:[r],Wf=/^[\w.-]+$/,Lf=/"/g,$f=r=>typeof r!="string"||Wf.test(r)?r:`"${r.replace(Lf,'\\"')}"`,zf=(r,t)=>Vs(r,t).join(" "),Mf=(r,t)=>Vs(r,t).map(o=>$f(o)).join(" "),jf=/ +/g,Uf=r=>{let t=[];for(let o of r.trim().split(jf)){let a=t[t.length-1];a&&a.endsWith("\\")?t[t.length-1]=`${a.slice(0,-1)} ${o}`:t.push(o)}return t};Ys.exports={joinCommand:zf,getEscapedCommand:Mf,parseCommand:Uf}});var rl=A((ah,gt)=>{"use strict";var Nf=require("path"),so=require("child_process"),Hf=as(),Gf=ls(),Vf=fs(),Yf=ps(),Xr=Ts(),Ks=Cs(),{spawnedKill:Qf,spawnedCancel:Xf,setupTimeout:Kf,validateTimeout:Zf,setExitHandler:Jf}=Os(),{handleInput:ed,getSpawnedResult:td,makeAllStream:rd,validateInputSync:nd}=Ns(),{mergePromise:Xs,getSpawnedPromise:od}=Gs(),{joinCommand:Zs,parseCommand:Js,getEscapedCommand:el}=Qs(),id=1e3*1e3*100,ad=({env:r,extendEnv:t,preferLocal:o,localDir:a,execPath:s})=>{let u=t?M(M({},process.env),r):r;return o?Vf.env({env:u,cwd:a,execPath:s}):u},tl=(r,t,o={})=>{let a=Hf._parse(r,t,o);return r=a.command,t=a.args,o=a.options,o=M({maxBuffer:id,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0},o),o.env=ad(o),o.stdio=Ks(o),process.platform==="win32"&&Nf.basename(r,".exe")==="cmd"&&t.unshift("/q"),{file:r,args:t,options:o,parsed:a}},Qt=(r,t,o)=>typeof t!="string"&&!Buffer.isBuffer(t)?o===void 0?void 0:"":r.stripFinalNewline?Gf(t):t,Kr=(r,t,o)=>{let a=tl(r,t,o),s=Zs(r,t),u=el(r,t);Zf(a.options);let f;try{f=so.spawn(a.file,a.args,a.options)}catch(g){let y=new so.ChildProcess,C=Promise.reject(Xr({error:g,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:a,timedOut:!1,isCanceled:!1,killed:!1}));return Xs(y,C)}let p=od(f),m=Kf(f,a.options,p),b=Jf(f,a.options,m),_={isCanceled:!1};f.kill=Qf.bind(null,f.kill.bind(f)),f.cancel=Xf.bind(null,f,_);let S=Yf(async()=>{let[{error:g,exitCode:y,signal:C,timedOut:P},v,F,H]=await td(f,a.options,b),I=Qt(a.options,v),z=Qt(a.options,F),B=Qt(a.options,H);if(g||y!==0||C!==null){let ae=Xr({error:g,exitCode:y,signal:C,stdout:I,stderr:z,all:B,command:s,escapedCommand:u,parsed:a,timedOut:P,isCanceled:_.isCanceled,killed:f.killed});if(!a.options.reject)return ae;throw ae}return{command:s,escapedCommand:u,exitCode:0,stdout:I,stderr:z,all:B,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return ed(f,a.options.input),f.all=rd(f,a.options),Xs(f,S)};gt.exports=Kr;gt.exports.sync=(r,t,o)=>{let a=tl(r,t,o),s=Zs(r,t),u=el(r,t);nd(a.options);let f;try{f=so.spawnSync(a.file,a.args,a.options)}catch(b){throw Xr({error:b,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:a,timedOut:!1,isCanceled:!1,killed:!1})}let p=Qt(a.options,f.stdout,f.error),m=Qt(a.options,f.stderr,f.error);if(f.error||f.status!==0||f.signal!==null){let b=Xr({stdout:p,stderr:m,error:f.error,signal:f.signal,exitCode:f.status,command:s,escapedCommand:u,parsed:a,timedOut:f.error&&f.error.code==="ETIMEDOUT",isCanceled:!1,killed:f.signal!==null});if(!a.options.reject)return b;throw b}return{command:s,escapedCommand:u,exitCode:0,stdout:p,stderr:m,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};gt.exports.command=(r,t)=>{let[o,...a]=Js(r);return Kr(o,a,t)};gt.exports.commandSync=(r,t)=>{let[o,...a]=Js(r);return Kr.sync(o,a,t)};gt.exports.node=(r,t,o={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(o=t,t=[]);let a=Ks.node(o),s=process.execArgv.filter(p=>!p.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:f=s}=o;return Kr(u,[...f,r,...Array.isArray(t)?t:[]],J(M({},o),{stdin:void 0,stdout:void 0,stderr:void 0,stdio:a,shell:!1}))}});var md={};Ii(md,{default:()=>dd});var Jr=require("@raycast/api");var at=require("@raycast/api"),Bi=require("path"),Oi=require("os"),qi=(0,at.getPreferenceValues)(),Fi=()=>{let{gridItemSize:r}=qi;return r=="small"?at.Grid.ItemSize.Small:r=="large"?at.Grid.ItemSize.Large:at.Grid.ItemSize.Medium},Di=()=>qi.showImageTitle,Wi=r=>r.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),Li=r=>r[0]==="~"?(0,Bi.join)((0,Oi.homedir)(),r.slice(1)):r;var pe=require("@raycast/api"),ct=require("react");var ya=fe(require("node:http"),1),ga=fe(require("node:https"),1),He=fe(require("node:zlib"),1),ne=fe(require("node:stream"),1),Nt=require("node:buffer");function Nu(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),a="",s=!1,u=o[0]||"text/plain",f=u;for(let _=1;_<o.length;_++)o[_]==="base64"?s=!0:(f+=`;${o[_]}`,o[_].indexOf("charset=")===0&&(a=o[_].substring(8)));!o[0]&&!a.length&&(f+=";charset=US-ASCII",a="US-ASCII");let p=s?"base64":"ascii",m=unescape(r.substring(t+1)),b=Buffer.from(m,p);return b.type=u,b.typeFull=f,b.charset=a,b}var $i=Nu;var ie=fe(require("node:stream"),1),Ee=require("node:util"),te=require("node:buffer");Wt();Ir();var Be=class extends Error{constructor(t,o){super(t);Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ee=class extends Be{constructor(t,o,a){super(t,o);a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}};var xr=Symbol.toStringTag,Wn=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[xr]==="URLSearchParams",$t=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[xr]),Yi=r=>typeof r=="object"&&(r[xr]==="AbortSignal"||r[xr]==="EventTarget"),Qi=(r,t)=>{let o=new URL(t).hostname,a=new URL(r).hostname;return o===a||o.endsWith(`.${a}`)};var ic=(0,Ee.promisify)(ie.default.pipeline),X=Symbol("Body internals"),Te=class{constructor(t,{size:o=0}={}){let a=null;t===null?t=null:Wn(t)?t=te.Buffer.from(t.toString()):$t(t)||te.Buffer.isBuffer(t)||(Ee.types.isAnyArrayBuffer(t)?t=te.Buffer.from(t):ArrayBuffer.isView(t)?t=te.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ie.default||(t instanceof Ue?(t=Vi(t),a=t.type.split("=")[1]):t=te.Buffer.from(String(t))));let s=t;te.Buffer.isBuffer(t)?s=ie.default.Readable.from(t):$t(t)&&(s=ie.default.Readable.from(t.stream())),this[X]={body:t,stream:s,boundary:a,disturbed:!1,error:null},this.size=o,t instanceof ie.default&&t.on("error",u=>{let f=u instanceof Be?u:new ee(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[X].error=f})}get body(){return this[X].stream}get bodyUsed(){return this[X].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:a}=await qr(this);return t.slice(o,o+a)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let a=new Ue,s=new URLSearchParams(await this.text());for(let[u,f]of s)a.append(u,f);return a}let{toFormData:o}=await Promise.resolve().then(()=>(ra(),ta));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[X].body&&this[X].body.type||"",o=await this.arrayBuffer();return new Re([o],{type:t})}async json(){let t=await qr(this);return JSON.parse(t.toString())}async text(){return(await qr(this)).toString()}buffer(){return qr(this)}};Te.prototype.buffer=(0,Ee.deprecate)(Te.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Te.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ee.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function qr(r){if(r[X].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[X].disturbed=!0,r[X].error)throw r[X].error;let{body:t}=r;if(t===null)return te.Buffer.alloc(0);if(!(t instanceof ie.default))return te.Buffer.alloc(0);let o=[],a=0;try{for await(let s of t){if(r.size>0&&a+s.length>r.size){let u=new ee(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}a+=s.length,o.push(s)}}catch(s){throw s instanceof Be?s:new ee(`Invalid response body while trying to fetch ${r.url}: ${s.message}`,"system",s)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?te.Buffer.from(o.join("")):te.Buffer.concat(o,a)}catch(s){throw new ee(`Could not create Buffer from response body for ${r.url}: ${s.message}`,"system",s)}else throw new ee(`Premature close of server response while trying to fetch ${r.url}`)}var lt=(r,t)=>{let o,a,{body:s}=r[X];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof ie.default&&typeof s.getBoundary!="function"&&(o=new ie.PassThrough({highWaterMark:t}),a=new ie.PassThrough({highWaterMark:t}),s.pipe(o),s.pipe(a),r[X].stream=o,s=a),s},ac=(0,Ee.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Fr=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":Wn(r)?"application/x-www-form-urlencoded;charset=UTF-8":$t(r)?r.type||null:te.Buffer.isBuffer(r)||Ee.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof Ue?`multipart/form-data; boundary=${t[X].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${ac(r)}`:r instanceof ie.default?null:"text/plain;charset=UTF-8",na=r=>{let{body:t}=r[X];return t===null?0:$t(t)?t.size:te.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},oa=async(r,{body:t})=>{t===null?r.end():await ic(t,r)};var zn=require("node:util"),jt=fe(require("node:http"),1),Dr=typeof jt.default.validateHeaderName=="function"?jt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},Mn=typeof jt.default.validateHeaderValue=="function"?jt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},re=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof re){let a=t.raw();for(let[s,u]of Object.entries(a))o.push(...u.map(f=>[s,f]))}else if(t!=null)if(typeof t=="object"&&!zn.types.isBoxedPrimitive(t)){let a=t[Symbol.iterator];if(a==null)o.push(...Object.entries(t));else{if(typeof a!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(s=>{if(typeof s!="object"||zn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");o=o.length>0?o.map(([a,s])=>(Dr(a),Mn(a,String(s)),[String(a).toLowerCase(),String(s)])):void 0;super(o);return new Proxy(this,{get(a,s,u){switch(s){case"append":case"set":return(f,p)=>(Dr(f),Mn(f,String(p)),URLSearchParams.prototype[s].call(a,String(f).toLowerCase(),String(p)));case"delete":case"has":case"getAll":return f=>(Dr(f),URLSearchParams.prototype[s].call(a,String(f).toLowerCase()));case"keys":return()=>(a.sort(),new Set(URLSearchParams.prototype.keys.call(a)).keys());default:return Reflect.get(a,s,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let a=o.join(", ");return/^content-encoding$/i.test(t)&&(a=a.toLowerCase()),a}forEach(t,o=void 0){for(let a of this.keys())Reflect.apply(t,o,[this.get(a),a,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let a=this.getAll(o);return o==="host"?t[o]=a[0]:t[o]=a.length>1?a:a[0],t},{})}};Object.defineProperties(re.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function ia(r=[]){return new re(r.reduce((t,o,a,s)=>(a%2===0&&t.push(s.slice(a,a+2)),t),[]).filter(([t,o])=>{try{return Dr(t),Mn(t,String(o)),!0}catch{return!1}}))}var sc=new Set([301,302,303,307,308]),Wr=r=>sc.has(r);var de=Symbol("Response internals"),Y=class extends Te{constructor(t=null,o={}){super(t,o);let a=o.status!=null?o.status:200,s=new re(o.headers);if(t!==null&&!s.has("Content-Type")){let u=Fr(t,this);u&&s.append("Content-Type",u)}this[de]={type:"default",url:o.url,status:a,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[de].type}get url(){return this[de].url||""}get status(){return this[de].status}get ok(){return this[de].status>=200&&this[de].status<300}get redirected(){return this[de].counter>0}get statusText(){return this[de].statusText}get headers(){return this[de].headers}get highWaterMark(){return this[de].highWaterMark}clone(){return new Y(lt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!Wr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Y(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new Y(null,{status:0,statusText:""});return t[de].type="error",t}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Y.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var ha=require("node:url"),pa=require("node:util");var aa=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var la=require("node:net");function sa(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var ua=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),ca="strict-origin-when-cross-origin";function fa(r){if(!ua.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function lc(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,la.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:/^(.+\.)*localhost$/.test(r.host)?!1:r.protocol==="file:"}function ut(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:lc(r)}function da(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let a=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let s=r.referrer,u=sa(s),f=sa(s,!0);u.toString().length>4096&&(u=f),t&&(u=t(u)),o&&(f=o(f));let p=new URL(r.url);switch(a){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return ut(u)&&!ut(p)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===p.origin?u:ut(u)&&!ut(p)?"no-referrer":f;case"same-origin":return u.origin===p.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===p.origin?u:f;case"no-referrer-when-downgrade":return ut(u)&&!ut(p)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${a}`)}}function ma(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let a of t)a&&ua.has(a)&&(o=a);return o}var U=Symbol("Request internals"),Lr=r=>typeof r=="object"&&typeof r[U]=="object",uc=(0,pa.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),qe=class extends Te{constructor(t,o={}){let a;if(Lr(t)?a=new URL(t.url):(a=new URL(t),t={}),a.username!==""||a.password!=="")throw new TypeError(`${a} is an url with embedded credentails.`);let s=o.method||t.method||"GET";if(s=s.toUpperCase(),"data"in o&&uc(),(o.body!=null||Lr(t)&&t.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:Lr(t)&&t.body!==null?lt(t):null;super(u,{size:o.size||t.size||0});let f=new re(o.headers||t.headers||{});if(u!==null&&!f.has("Content-Type")){let b=Fr(u,this);b&&f.set("Content-Type",b)}let p=Lr(t)?t.signal:null;if("signal"in o&&(p=o.signal),p!=null&&!Yi(p))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let m=o.referrer==null?t.referrer:o.referrer;if(m==="")m="no-referrer";else if(m){let b=new URL(m);m=/^about:(\/\/)?client$/.test(b)?"client":b}else m=void 0;this[U]={method:s,redirect:o.redirect||t.redirect||"follow",headers:f,parsedURL:a,signal:p,referrer:m},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[U].method}get url(){return(0,ha.format)(this[U].parsedURL)}get headers(){return this[U].headers}get redirect(){return this[U].redirect}get signal(){return this[U].signal}get referrer(){if(this[U].referrer==="no-referrer")return"";if(this[U].referrer==="client")return"about:client";if(this[U].referrer)return this[U].referrer.toString()}get referrerPolicy(){return this[U].referrerPolicy}set referrerPolicy(t){this[U].referrerPolicy=fa(t)}clone(){return new qe(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(qe.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var ba=r=>{let{parsedURL:t}=r[U],o=new re(r[U].headers);o.has("Accept")||o.set("Accept","*/*");let a=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(a="0"),r.body!==null){let p=na(r);typeof p=="number"&&!Number.isNaN(p)&&(a=String(p))}a&&o.set("Content-Length",a),r.referrerPolicy===""&&(r.referrerPolicy=ca),r.referrer&&r.referrer!=="no-referrer"?r[U].referrer=da(r):r[U].referrer="no-referrer",r[U].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:s}=r;typeof s=="function"&&(s=s(t)),!o.has("Connection")&&!s&&o.set("Connection","close");let u=aa(t),f={path:t.pathname+u,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:s};return{parsedURL:t,options:f}};var Ut=class extends Be{constructor(t,o="aborted"){super(t,o)}};Ir();$n();var cc=new Set(["data:","http:","https:"]);async function $r(r,t){return new Promise((o,a)=>{let s=new qe(r,t),{parsedURL:u,options:f}=ba(s);if(!cc.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let y=$i(s.url),C=new Y(y,{headers:{"Content-Type":y.typeFull}});o(C);return}let p=(u.protocol==="https:"?ga.default:ya.default).request,{signal:m}=s,b=null,_=()=>{let y=new Ut("The operation was aborted.");a(y),s.body&&s.body instanceof ne.default.Readable&&s.body.destroy(y),!(!b||!b.body)&&b.body.emit("error",y)};if(m&&m.aborted){_();return}let T=()=>{_(),g()},S=p(u.toString(),f);m&&m.addEventListener("abort",T);let g=()=>{S.abort(),m&&m.removeEventListener("abort",T)};S.on("error",y=>{a(new ee(`request to ${s.url} failed, reason: ${y.message}`,"system",y)),g()}),fc(S,y=>{b.body.destroy(y)}),process.version<"v14"&&S.on("socket",y=>{let C;y.prependListener("end",()=>{C=y._eventsCount}),y.prependListener("close",P=>{if(b&&C<y._eventsCount&&!P){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",b.body.emit("error",v)}})}),S.on("response",y=>{S.setTimeout(0);let C=ia(y.rawHeaders);if(Wr(y.statusCode)){let I=C.get("Location"),z=null;try{z=I===null?null:new URL(I,s.url)}catch{if(s.redirect!=="manual"){a(new ee(`uri requested responds with an invalid redirect URL: ${I}`,"invalid-redirect")),g();return}}switch(s.redirect){case"error":a(new ee(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(z===null)break;if(s.counter>=s.follow){a(new ee(`maximum redirect reached at: ${s.url}`,"max-redirect")),g();return}let B={headers:new re(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:lt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!Qi(s.url,z))for(let K of["authorization","www-authenticate","cookie","cookie2"])B.headers.delete(K);if(y.statusCode!==303&&s.body&&t.body instanceof ne.default.Readable){a(new ee("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&s.method==="POST")&&(B.method="GET",B.body=void 0,B.headers.delete("content-length"));let ae=ma(C);ae&&(B.referrerPolicy=ae),o($r(new qe(z,B))),g();return}default:return a(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}m&&y.once("end",()=>{m.removeEventListener("abort",T)});let P=(0,ne.pipeline)(y,new ne.PassThrough,I=>{I&&a(I)});process.version<"v12.10"&&y.on("aborted",T);let v={url:s.url,status:y.statusCode,statusText:y.statusMessage,headers:C,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},F=C.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||F===null||y.statusCode===204||y.statusCode===304){b=new Y(P,v),o(b);return}let H={flush:He.default.Z_SYNC_FLUSH,finishFlush:He.default.Z_SYNC_FLUSH};if(F==="gzip"||F==="x-gzip"){P=(0,ne.pipeline)(P,He.default.createGunzip(H),I=>{I&&a(I)}),b=new Y(P,v),o(b);return}if(F==="deflate"||F==="x-deflate"){let I=(0,ne.pipeline)(y,new ne.PassThrough,z=>{z&&a(z)});I.once("data",z=>{(z[0]&15)===8?P=(0,ne.pipeline)(P,He.default.createInflate(),B=>{B&&a(B)}):P=(0,ne.pipeline)(P,He.default.createInflateRaw(),B=>{B&&a(B)}),b=new Y(P,v),o(b)}),I.once("end",()=>{b||(b=new Y(P,v),o(b))});return}if(F==="br"){P=(0,ne.pipeline)(P,He.default.createBrotliDecompress(),I=>{I&&a(I)}),b=new Y(P,v),o(b);return}b=new Y(P,v),o(b)}),oa(S,s).catch(a)})}function fc(r,t){let o=Nt.Buffer.from(`0\r
\r
`),a=!1,s=!1,u;r.on("response",f=>{let{headers:p}=f;a=p["transfer-encoding"]==="chunked"&&!p["content-length"]}),r.on("socket",f=>{let p=()=>{if(a&&!s){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",t(m)}};f.prependListener("close",p),r.on("abort",()=>{f.removeListener("close",p)}),f.on("data",m=>{s=Nt.Buffer.compare(m.slice(-5),o)===0,!s&&u&&(s=Nt.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&Nt.Buffer.compare(m.slice(-2),o.slice(3))===0),u=m})})}var Sa=r=>{let{accessKey:t,orientation:o}=(0,pe.getPreferenceValues)(),[a,s]=(0,ct.useState)({results:[],isLoading:!0}),u=(0,ct.useRef)(null);try{if(!t)throw new Error("Missing API key.");(0,ct.useEffect)(()=>(f(""),()=>{u.current?.abort()}),[]);let f=async p=>{u.current?.abort(),u.current=new AbortController;try{if(p===""){s(_=>J(M({},_),{isLoading:!1}));return}s(_=>J(M({},_),{isLoading:!0}));let{errors:m,results:b}=await dc({accessKey:t,signal:u.current?.signal,searchText:p,options:{orientation:o,type:r||"photos"}});m?.length&&(0,pe.showToast)(pe.Toast.Style.Failure,`Failed to fetch ${r}.`,m?.join(`
`)),s(_=>J(M({},_),{isLoading:!1,results:b||[]}))}catch(m){if(m instanceof Ut)return;(0,pe.showToast)(pe.Toast.Style.Failure,"Could not perform search",String(m))}};return{state:a,search:f}}catch(f){console.error(f);let p={search:()=>({}),state:{results:[],isLoading:!1}};return(0,pe.showToast)(pe.Toast.Style.Failure,"Something went wrong",String(f)),p}},dc=async({searchText:r,options:t,accessKey:o,signal:a})=>{let s=new URLSearchParams({page:"1",query:r,per_page:"30"});t.orientation!=="all"&&s.append("orientation",t.orientation);let{errors:u,results:f}=await $r(`https://api.unsplash.com/search/${t.type}?${s.toString()}`,{method:"GET",signal:a,headers:{Authorization:`Client-ID ${o}`}}).then(p=>p.json());return{results:f,errors:u}};var D=require("@raycast/api");var Xt=require("@raycast/api");var nl=fe(require("node:process"),1),ol=fe(rl(),1);async function St(r){if(nl.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await(0,ol.default)("osascript",["-e",r]);return t}var il=async({url:r,id:t})=>{let{downloadSize:o}=(0,Xt.getPreferenceValues)();try{await(0,Xt.showHUD)("Please select a location to save the image..."),await St(`
      set outputFolder to choose folder with prompt "Please select an output folder:"
      set temp_folder to (POSIX path of outputFolder) & "${t}-${o}.jpg"
      set q_temp_folder to quoted form of temp_folder

      set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd
    `)}catch(a){console.error(a),await(0,Xt.showHUD)("Couldn't save the image...")}};var G=require("@raycast/api");var lo=require("fs");var al=async({url:r,id:t,useHud:o=!1,isBackground:a=!1})=>{let{downloadSize:s,applyTo:u,wallpaperPath:f}=(0,G.getPreferenceValues)(),p=Li(f||G.environment.supportPath),m;if((0,lo.existsSync)(p)){let _="Downloading and setting wallpaper...";o?!a&&await(0,G.showHUD)(_):m=await(0,G.showToast)(G.Toast.Style.Animated,_)}else{let _="The selected path does not exist. Please select a valid path.";await(o?(0,G.showHUD)(_):(0,G.showToast)(G.Toast.Style.Animated,_));return}let b=p.endsWith("/")?`${p}${t}-${s}.jpg`:`${p}/${t}-${s}.jpg`;try{let _=b,T=(0,lo.existsSync)(_)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd`;if(await St(`
      set temp_folder to (POSIX path of "${_}")
      set q_temp_folder to quoted form of temp_folder

      ${T}

      set x to alias (POSIX file temp_folder)

      try
        tell application "System Events"
          tell ${u} desktop
            set picture to (x as text)
            return "ok"
          end tell
        end tell
      on error
        set dialogTitle to "Error Setting Wallpaper"
        set dialogText to "Please make sure you have given Raycast the required permission. To make sure, click the button below and grant Raycast the 'System Events' permission."

        display alert dialogTitle message dialogText buttons {"Cancel", "Open Preferences"} default button 2 as informational
          if button returned of result is "Open Preferences" then
            do shell script "open 'x-apple.systempreferences:com.apple.preference.security?Privacy_Automation'"
          end if

        return "error"
      end try
    `)!=="ok")throw new Error("Error setting wallpaper.");return o?!a&&await(0,G.showHUD)("Wallpaper set!"):m&&(m.style=G.Toast.Style.Success,m.title="Wallpaper set!"),!0}catch(_){return console.error(_),m&&(m.style=G.Toast.Style.Failure,m.title="Something went wrong.",m.message="Try with another image or check your internet connection."),!1}};var Fe=require("@raycast/api");var sl=require("fs"),ll=async({url:r,id:t})=>{let o=await(0,Fe.showToast)(Fe.Toast.Style.Animated,"Downloading and copying image..."),a=Fe.environment.supportPath,s=a.endsWith("/")?`${a}${t}.jpg`:`${a}/${t}.jpg`;try{let u=s,f=(0,sl.existsSync)(u)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd`;await St(`
      set temp_folder to (POSIX path of "${u}")
      set q_temp_folder to quoted form of temp_folder

      ${f}

      set x to alias (POSIX file temp_folder)
      set the clipboard to (read (contents of x) as JPEG picture)
    `),o.style=Fe.Toast.Style.Success,o.title="Image copied to the clipboard!"}catch(u){console.error(u),o.style=Fe.Toast.Style.Failure,o.title="Something went wrong.",o.message="Try with another image or check your internet connection."}};var ul=require("@raycast/api");var sd=({result:r})=>{let t=r.urls?.regular||r.urls?.small||r.urls?.thumb,o=r.created_at?new Date(r.created_at).toLocaleString():"Unknown",a=[r.description&&`# ${r.description}`,r.user?.name&&`**Photo by [${r.user.name}](${r.user.links.html})**`,t&&`![image](${t})`,r.alt_description&&`**Description**: ${r.alt_description}`,r.created_at&&`**Uploaded On**: ${o}`,r.likes&&`**Likes**: ${r.likes}`,r.width&&r.height&&`**Ratio**: ${r.width}x${r.height}`];return _jsx(ul.Detail,{markdown:a.filter(s=>s).map(s=>s+`
`).join(`
`),navigationTitle:r.user?.name,actions:_jsx(Zr,{item:r})})},cl=sd;var uo=fe(require("react")),ld=({details:r=!1,item:t})=>_jsx(D.ActionPanel,null,_jsx(ud,{details:r,item:t})),ud=({details:r=!1,item:t})=>{let{push:o}=(0,D.useNavigation)(),{downloadSize:a}=(0,D.getPreferenceValues)(),s=t.urls?.raw||t.urls?.full||t.urls?.regular||t.urls?.small,u={url:t.urls?.[a]||s,id:`${t.id}-${a}`};return _jsx(uo.default.Fragment,null,_jsx(D.ActionPanel.Section,null,r&&_jsx(D.Action,{title:"Show Details",icon:D.Icon.List,onAction:()=>o(_jsx(cl,{result:t}))}),t.links?.html&&_jsx(D.Action.OpenInBrowser,{url:t.links.html,title:"Open Original"}),t.user?.links?.html&&_jsx(D.Action.OpenInBrowser,{url:t.user.links.html,icon:D.Icon.Person,shortcut:{modifiers:["cmd"],key:"o"},title:"Open Author"})),_jsx(D.ActionPanel.Section,{title:"Image"},s&&_jsx(uo.default.Fragment,null,_jsx(D.Action,{title:"Copy to Clipboard",icon:D.Icon.Clipboard,shortcut:{modifiers:["cmd","shift"],key:"c"},onAction:()=>ll(u)}),_jsx(D.Action,{title:"Set as Desktop Wallpaper",icon:D.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"w"},onAction:()=>al({url:s,id:String(t.id)})}),_jsx(D.Action,{title:"Download Image",icon:D.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"d"},onAction:()=>il({url:s,id:String(t.id)})}))),_jsx(D.ActionPanel.Section,{title:"Links"},t.links?.html&&_jsx(D.Action.CopyToClipboard,{content:t.links.html,title:"Copy URL to Clipboard",icon:D.Icon.Clipboard}),s&&_jsx(D.Action.CopyToClipboard,{content:s,title:"Copy Image URL to Clipboard",icon:D.Icon.Clipboard}),t.user?.links?.html&&_jsx(D.Action.CopyToClipboard,{content:t.user.links.html,title:"Copy Author URL to Clipboard",icon:D.Icon.Clipboard})))},Zr=ld;var cd=()=>{let{state:r,search:t}=Sa("photos"),o=Fi();return _jsx(Jr.Grid,{isLoading:r.isLoading,itemSize:o,onSearchTextChange:t,searchBarPlaceholder:"Search wallpapers...",throttle:!0},_jsx(Jr.Grid.Section,{title:"Results",subtitle:String(r?.results?.length)},r.results.map(a=>_jsx(fd,{key:a.id,searchResult:a}))))},fd=({searchResult:r})=>{let[t,o,a,s]=[r.description||r.alt_description||r.user.name||"No Name",r.description?r.alt_description:void 0,r.urls?.thumb||r.urls?.small||r.urls?.regular,r?.user?.profile_image?.small],u=Di()?Wi(t):"";return _jsx(Jr.Grid.Item,{content:a,title:u,actions:_jsx(Zr,{item:r,details:!0})})},dd=cd;module.exports=Uu(md);0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
