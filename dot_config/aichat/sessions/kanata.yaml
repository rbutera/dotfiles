model: claude:claude-3-5-sonnet-20240620
use_tools: fs,web_search
save_session: true
messages:
- role: user
  content: i'm using kanata to rebind some keys for my main keyboard. it works very well. does it support different keymaps for different devices? i'd like to be able to remap my macropad but don't want to remap the corresponding keys on my main keyboard
- role: assistant
  content: |-
    Yes, Kanata supports different keymaps for different devices. This feature allows you to create distinct configurations for multiple input devices, such as your main keyboard and your macropad.

    To set up different keymaps for different devices, you can use the `(defsrc)` block in your Kanata configuration file. Here's how you can do it:

    1. Identify the unique identifiers for your devices:
       Run Kanata with the `--debug` flag to see the device information when you connect or use your devices. Look for lines like:
       ```
       [2023-05-15T12:34:56Z INFO  kanata] New device: "Device Name" (vendor: 0x1234, product: 0x5678)
       ```

    2. In your configuration file, create separate `(defsrc)` blocks for each device:

       ```
       (defcfg
         ;; ... your global config options ...
       )

       (defsrc
         ;; This is the default layout for devices not explicitly defined
         ;; Your main keyboard layout goes here
       )

       (defsrc (device-name "Your Macropad Name")
         ;; Define the source layout for your macropad
         key1 key2 key3
         key4 key5 key6
       )

       (defalias
         ;; ... your aliases ...
       )

       (deflayer default
         ;; ... your main keyboard remapping ...
       )

       (deflayer macropad
         ;; ... your macropad remapping ...
       )
       ```

    3. Use the `(deflayer)` blocks to define the remapped layouts for each device.

    4. In the configuration, you can specify which layer to use for each device:

       ```
       (defcfg
         ;; ... other config options ...
         default-layer default
       )

       (defsrc (device-name "Your Macropad Name")
         ;; ... macropad source layout ...
         default-layer macropad
       )
       ```

    This setup allows Kanata to apply different keymaps to different devices. Your main keyboard will use the default layout, while your macropad will use the specific layout you've defined for it.

    Remember to replace "Your Macropad Name" with the actual name or identifier of your macropad as shown in the debug output.
